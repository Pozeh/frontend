<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seller Dashboard - EcoLoop Kenya</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2563eb;
            --primary-dark: #1e40af;
            --primary-light: #3b82f6;
            --secondary-color: #6366f1;
            --accent-color: #8b5cf6;
            --dark-bg: #1e293b;
            --light-bg: #f8fafc;
            --card-bg: #ffffff;
            --border-color: #e2e8f0;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --text-muted: #94a3b8;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --info-color: #06b6d4;
            --white: #ffffff;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1);
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Login Screen Styles */
        .login-screen {
            display: flex;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 50%, var(--accent-color) 100%);
            position: relative;
            overflow: hidden;
        }

        .login-screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            opacity: 0.3;
        }

        .login-container {
            display: flex;
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            box-shadow: var(--shadow-xl);
            position: relative;
            z-index: 1;
        }

        .login-left {
            flex: 1;
            background: var(--card-bg);
            padding: 80px 60px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .login-right {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            padding: 80px 60px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .login-logo {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 40px;
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary-color);
            transition: all 0.3s ease;
            padding: 12px 16px;
            border-radius: 12px;
            cursor: pointer;
        }

        .login-logo:hover {
            background: rgba(37, 99, 235, 0.1);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.2);
        }

        .login-logo i {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            transition: transform 0.3s ease;
        }

        .login-logo:hover i {
            transform: scale(1.15) rotate(5deg);
        }

        .login-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--text-primary);
        }

        .login-subtitle {
            color: var(--text-secondary);
            margin-bottom: 40px;
            font-size: 1.125rem;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .form-input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--border-color);
            border-radius: var(--radius-lg);
            font-size: 1rem;
            background: var(--light-bg);
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            background: var(--card-bg);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .form-checkbox {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
        }

        .btn {
            padding: 16px 32px;
            border: none;
            border-radius: var(--radius-lg);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: var(--shadow-md);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: var(--card-bg);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--light-bg);
            border-color: var(--primary-color);
            color: var(--primary-color);
            transform: translateY(-2px);
        }

        .login-toggle {
            text-align: center;
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid var(--border-color);
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .login-toggle a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
            margin-left: 4px;
        }

        .login-toggle a:hover {
            text-decoration: underline;
        }

        /* Dashboard Styles */
        .dashboard-screen {
            display: none;
            min-height: 100vh;
            background: var(--light-bg);
        }

        .dashboard-header {
            background: var(--card-bg);
            box-shadow: var(--shadow-md);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .dashboard-header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dashboard-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            transition: all 0.3s ease;
            padding: 8px 12px;
            border-radius: 8px;
        }

        .dashboard-logo:hover {
            background: rgba(37, 99, 235, 0.1);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.2);
        }

        .dashboard-logo i {
            transition: transform 0.3s ease;
        }

        .dashboard-logo:hover i {
            transform: scale(1.1);
        }

        .dashboard-user {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .user-info {
            text-align: right;
        }

        .user-name {
            font-weight: 600;
            color: var(--text-primary);
        }

        .user-email {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .dashboard-container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            min-height: calc(100vh - 73px);
        }

        .dashboard-sidebar {
            width: 280px;
            background: var(--card-bg);
            border-right: 1px solid var(--border-color);
            padding: 24px 0;
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-item {
            margin-bottom: 4px;
        }

        .sidebar-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 24px;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .sidebar-link:hover {
            color: var(--primary-color);
            background: rgba(37, 99, 235, 0.05);
        }

        .sidebar-link.active {
            color: var(--primary-color);
            background: rgba(37, 99, 235, 0.1);
            border-left: 4px solid var(--primary-color);
        }

        .sidebar-link i {
            font-size: 1.125rem;
            width: 20px;
        }

        .dashboard-content {
            flex: 1;
            padding: 32px;
        }

        .dashboard-welcome {
            margin-bottom: 40px;
        }

        .welcome-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .welcome-subtitle {
            color: var(--text-secondary);
            font-size: 1.125rem;
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-xl);
            padding: 32px 24px;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            font-size: 1.5rem;
            color: white;
        }

        .stat-icon.products {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
        }

        .stat-icon.orders {
            background: linear-gradient(135deg, var(--success-color), #059669);
        }

        .stat-icon.revenue {
            background: linear-gradient(135deg, var(--warning-color), #d97706);
        }

        .stat-icon.views {
            background: linear-gradient(135deg, var(--info-color), #0891b2);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .stat-label {
            color: var(--text-secondary);
            font-weight: 500;
        }

        .section-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
            margin-bottom: 32px;
        }

        .section-header {
            padding: 24px 32px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 24px;
            padding: 32px;
        }

        .product-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-sm);
        }

        .product-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-color);
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background: var(--light-bg);
        }

        .product-info {
            padding: 20px;
        }

        .product-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
            line-height: 1.4;
        }

        .product-price {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 16px;
        }

        .product-status {
            display: inline-block;
            padding: 6px 12px;
            border-radius: var(--radius-md);
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .status-pending {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning-color);
        }

        .status-approved {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success-color);
        }

        .status-rejected {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger-color);
        }

        .product-actions {
            display: flex;
            gap: 12px;
        }

        .btn-edit, .btn-delete {
            padding: 8px 16px;
            border: none;
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-edit {
            background: var(--info-color);
            color: white;
        }

        .btn-edit:hover {
            background: #0891b2;
            transform: translateY(-1px);
        }

        .btn-delete {
            background: var(--danger-color);
            color: white;
        }

        .btn-delete:hover {
            background: #dc2626;
            transform: translateY(-1px);
        }

        .empty-state {
            text-align: center;
            padding: 80px 32px;
            color: var(--text-secondary);
        }

        .empty-state i {
            font-size: 4rem;
            margin-bottom: 24px;
            color: var(--text-muted);
        }

        .empty-state h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text-primary);
        }

        .empty-state p {
            margin-bottom: 24px;
            font-size: 1rem;
        }

        /* Professional Toast Notifications - Top Right Position */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, rgba(255,255,255,0.98), rgba(248,250,252,0.98));
            color: #1f2937;
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.25), 0 4px 16px rgba(0,0,0,0.15);
            transform: translateY(-200px) scale(0.9);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            z-index: 99999;
            font-weight: 600;
            font-size: 14px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.3);
            max-width: 380px;
            min-width: 250px;
            display: flex;
            align-items: center;
            opacity: 0;
            pointer-events: auto;
        }

        .toast.show {
            transform: translateY(0) scale(1);
            opacity: 1;
        }

        .toast.hide {
            transform: translateY(-200px) scale(0.9);
            opacity: 0;
        }

        .toast-content {
            display: flex;
            align-items: center;
            gap: 12px;
            width: 100%;
        }

        .toast-icon {
            font-size: 20px;
            flex-shrink: 0;
            width: 24px;
            text-align: center;
        }

        .toast-message {
            flex: 1;
            line-height: 1.4;
            font-weight: 500;
        }

        /* Toast type variations - Enhanced visibility */
        .toast.success {
            background: linear-gradient(135deg, rgba(34,197,94,0.98), rgba(16,185,129,0.98));
            color: white;
            border: 2px solid rgba(34,197,94,0.4);
            box-shadow: 0 8px 32px rgba(34,197,94,0.3), 0 4px 16px rgba(0,0,0,0.15);
        }

        .toast.success .toast-icon {
            color: #f0fdf4;
        }

        .toast.error {
            background: linear-gradient(135deg, rgba(239,68,68,0.98), rgba(220,38,38,0.98));
            color: white;
            border: 2px solid rgba(239,68,68,0.4);
            box-shadow: 0 8px 32px rgba(239,68,68,0.3), 0 4px 16px rgba(0,0,0,0.15);
        }

        .toast.error .toast-icon {
            color: #fef2f2;
        }

        .toast.warning {
            background: linear-gradient(135deg, rgba(245,158,11,0.98), rgba(217,119,6,0.98));
            color: white;
            border: 2px solid rgba(245,158,11,0.4);
            box-shadow: 0 8px 32px rgba(245,158,11,0.3), 0 4px 16px rgba(0,0,0,0.15);
        }

        .toast.warning .toast-icon {
            color: #fffbeb;
        }

        .toast.info {
            background: linear-gradient(135deg, rgba(59,130,246,0.98), rgba(37,99,235,0.98));
            color: white;
            border: 2px solid rgba(59,130,246,0.4);
            box-shadow: 0 8px 32px rgba(59,130,246,0.3), 0 4px 16px rgba(0,0,0,0.15);
        }

        .toast.info .toast-icon {
            color: #eff6ff;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .login-container {
                flex-direction: column;
            }

            .login-left, .login-right {
                padding: 40px 30px;
            }

            .dashboard-container {
                flex-direction: column;
            }

            .dashboard-header-content {
                padding: 12px 16px;
            }

            .dashboard-logo {
                font-size: 1.2rem;
            }

            .marketplace-btn {
                padding: 6px 12px;
                font-size: 0.75rem;
                gap: 6px;
            }

            .marketplace-btn span {
                display: none;
            }

            .dashboard-sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid var(--border-color);
            }

            .dashboard-content {
                padding: 20px;
            }

            .dashboard-stats {
                grid-template-columns: 1fr;
            }

            .products-grid {
                grid-template-columns: 1fr;
                padding: 20px;
            }
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 10000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
        }

        .modal-content {
            background: var(--card-bg);
            border-radius: var(--radius-xl);
            padding: 0;
            max-width: 600px;
            width: 90%;
            box-shadow: var(--shadow-xl);
            position: relative;
            transform: scale(0.9);
            transition: transform 0.3s ease;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-content.modal-large {
            max-width: 800px;
        }

        .modal.active .modal-content {
            transform: scale(1);
        }

        .modal-header {
            padding: 24px 32px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin: 0;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: color 0.3s ease;
            padding: 8px;
            border-radius: var(--radius-md);
        }

        .modal-close:hover {
            color: var(--danger-color);
            background: rgba(239, 68, 68, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .form-group {
            margin-bottom: 24px;
            padding: 0 32px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .form-input, .form-input select, .form-input textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: 1rem;
            transition: all 0.3s ease;
            background: var(--light-bg);
        }

        .form-input:focus, .form-input select:focus, .form-input textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            background: var(--card-bg);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .image-upload-area {
            border: 2px dashed var(--border-color);
            border-radius: var(--radius-lg);
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--light-bg);
        }

        .image-upload-area:hover {
            border-color: var(--primary-color);
            background: rgba(37, 99, 235, 0.05);
        }

        .image-upload-area i {
            font-size: 3rem;
            color: var(--text-secondary);
            margin-bottom: 16px;
        }

        .image-upload-area p {
            margin: 8px 0;
            color: var(--text-primary);
        }

        .text-muted {
            color: var(--text-muted);
            font-size: 0.875rem;
        }

        .image-preview {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .image-preview-item {
            position: relative;
            border-radius: var(--radius-md);
            overflow: hidden;
            aspect-ratio: 1;
        }

        .image-preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .image-preview-item .remove-image {
            position: absolute;
            top: 4px;
            right: 4px;
            background: var(--danger-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
        }

        .form-actions {
            display: flex;
            gap: 16px;
            justify-content: flex-end;
            padding: 24px 32px;
            border-top: 1px solid var(--border-color);
            margin: 0 -32px -32px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                margin: 20px;
                padding: 0;
            }
            
            .form-actions {
                flex-direction: column;
            }
            
            .form-actions .btn {
                width: 100%;
            }

            .form-group {
                padding: 0 20px;
            }

            .form-actions {
                padding: 24px 20px;
                margin: 0 -20px -32px;
            }
        }

        /* Product Details Modal Styles */
        .product-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
            padding: 32px;
        }

        .product-images {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
        }

        .product-images img {
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-radius: var(--radius-lg);
        }

        .product-info h2 {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        .product-meta {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .product-meta .price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .product-meta .condition,
        .product-meta .category {
            padding: 6px 12px;
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            font-weight: 600;
            background: var(--light-bg);
            color: var(--text-secondary);
        }

        .product-description,
        .product-location,
        .product-status {
            margin-bottom: 24px;
        }

        .product-description h3,
        .product-location h3,
        .product-status h3 {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
        }

        .product-description p {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .product-location p {
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            font-weight: 600;
        }

        .status-badge.status-pending {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning-color);
        }

        .status-badge.status-approved {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success-color);
        }

        .status-badge.status-rejected {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger-color);
        }

        @media (max-width: 768px) {
            .product-details {
                grid-template-columns: 1fr;
                padding: 20px;
            }

            .product-images img {
                height: 200px;
            }

            .product-meta {
                flex-direction: column;
                gap: 8px;
            }
        }

        /* Dashboard Sections */
        .dashboard-section {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }

        .dashboard-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Section Headers */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 32px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .section-title {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .section-subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
            margin: 0;
        }

        /* Dashboard Charts */
        .dashboard-charts {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-top: 32px;
        }

        .chart-card {
            background: var(--card-bg);
            padding: 24px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
        }

        .chart-card h3 {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        .chart-placeholder {
            height: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            background: var(--light-bg);
            border-radius: var(--radius-md);
            border: 2px dashed var(--border-color);
        }

        .chart-placeholder i {
            font-size: 3rem;
            margin-bottom: 16px;
        }

        /* Product Filters */
        .products-filters, .orders-filters {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .filter-group {
            min-width: 200px;
        }

        .filter-group .form-input {
            margin-bottom: 0;
        }

        /* Orders List */
        .orders-list {
            display: grid;
            gap: 16px;
        }

        .order-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
        }

        .order-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .order-id {
            font-weight: 600;
            color: var(--text-primary);
        }

        .order-status {
            padding: 4px 12px;
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            font-weight: 600;
        }

        .order-status.pending {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning-color);
        }

        .order-status.processing {
            background: rgba(59, 130, 246, 0.1);
            color: var(--primary-color);
        }

        .order-status.shipped {
            background: rgba(139, 92, 246, 0.1);
            color: #8b5cf6;
        }

        .order-status.delivered {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success-color);
        }

        .order-status.cancelled {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger-color);
        }

        .order-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 16px;
        }

        .order-customer, .order-items {
            color: var(--text-secondary);
        }

        .order-customer strong, .order-items strong {
            color: var(--text-primary);
        }

        .order-actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        /* Analytics Grid */
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
        }

        .analytics-card {
            background: var(--card-bg);
            padding: 24px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
        }

        .analytics-card h3 {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        .analytics-chart {
            height: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            background: var(--light-bg);
            border-radius: var(--radius-md);
            border: 2px dashed var(--border-color);
        }

        .analytics-chart i {
            font-size: 2.5rem;
            margin-bottom: 12px;
        }

        .top-products-list {
            display: grid;
            gap: 12px;
        }

        .top-product-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: var(--light-bg);
            border-radius: var(--radius-md);
        }

        .top-product-name {
            font-weight: 500;
            color: var(--text-primary);
        }

        .top-product-sales {
            font-weight: 600;
            color: var(--primary-color);
        }

        /* Settings Grid */
        .settings-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .settings-card {
            background: var(--card-bg);
            padding: 24px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
        }

        .settings-card h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 24px;
        }

        .settings-card .form-group {
            margin-bottom: 20px;
            padding: 0;
        }

        .date-filter {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .date-filter .form-input {
            margin-bottom: 0;
            min-width: 150px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .dashboard-charts {
                grid-template-columns: 1fr;
            }

            .analytics-grid {
                grid-template-columns: 1fr;
            }

            .settings-grid {
                grid-template-columns: 1fr;
            }

            .section-header {
                flex-direction: column;
                gap: 16px;
                align-items: stretch;
            }

            .products-filters, .orders-filters {
                flex-direction: column;
            }

            .filter-group {
                min-width: auto;
            }

            .order-details {
                grid-template-columns: 1fr;
            }

            .order-header {
                flex-direction: column;
                gap: 12px;
                align-items: stretch;
            }
        }

        /* Form Sections */
        .form-section {
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid var(--border-color);
        }

        .form-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .section-subtitle {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-subtitle::before {
            content: '';
            width: 4px;
            height: 20px;
            background: var(--primary-color);
            border-radius: 2px;
        }

        /* Form Hints */
        .form-hint {
            display: block;
            margin-top: 4px;
            font-size: 0.75rem;
            color: var(--text-muted);
            line-height: 1.4;
        }

        /* Checkbox Groups */
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 8px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            background: var(--bg-primary);
            transition: all 0.3s ease;
        }

        .checkbox-item:hover {
            background: var(--bg-secondary);
            border-color: var(--primary-color);
        }

        .checkbox-item input[type="checkbox"] {
            margin: 0;
            accent-color: var(--primary-color);
        }

        .checkbox-item span {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* Enhanced Modal Styles */
        .modal-content {
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-content::-webkit-scrollbar {
            width: 6px;
        }

        .modal-content::-webkit-scrollbar-track {
            background: var(--bg-secondary);
            border-radius: 3px;
        }

        .modal-content::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 3px;
        }

        .modal-content::-webkit-scrollbar-thumb:hover {
            background: var(--text-muted);
        }

        /* Form Row Enhancements */
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .checkbox-group {
                grid-template-columns: 1fr;
            }

            .modal-content {
                max-height: 95vh;
            }

            .section-subtitle {
                font-size: 1rem;
            }
        }

        /* Notification System */
        .notification-icon {
            position: relative;
            cursor: pointer;
            padding: 8px;
            border-radius: var(--radius-md);
            transition: all 0.3s ease;
        }

        .notification-icon:hover {
            background: var(--bg-secondary);
        }

        .notification-icon i {
            font-size: 1.125rem;
            color: var(--text-secondary);
        }

        .notification-badge {
            position: absolute;
            top: 4px;
            right: 4px;
            background: var(--danger-color);
            color: white;
            font-size: 0.625rem;
            font-weight: 600;
            padding: 2px 5px;
            border-radius: 10px;
            min-width: 16px;
            text-align: center;
        }

        .notification-badge.hidden {
            display: none;
        }

        /* Notifications Modal */
        .notifications-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .notifications-modal.active {
            display: flex;
        }

        .notifications-content {
            background: var(--card-bg);
            border-radius: var(--radius-lg);
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow: hidden;
            box-shadow: var(--shadow-xl);
        }

        .notifications-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .notifications-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .notifications-close {
            background: none;
            border: none;
            font-size: 1.25rem;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 4px;
            border-radius: var(--radius-md);
            transition: all 0.3s ease;
        }

        .notifications-close:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .notifications-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .notification-item {
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
            transition: background 0.3s ease;
        }

        .notification-item:hover {
            background: var(--bg-secondary);
        }

        .notification-item.unread {
            background: rgba(37, 99, 235, 0.05);
            border-left: 3px solid var(--primary-color);
        }

        .notification-content {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .notification-icon-item {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .notification-icon-item.approved {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success-color);
        }

        .notification-icon-item.rejected {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger-color);
        }

        .notification-details {
            flex: 1;
        }

        .notification-message {
            font-size: 0.875rem;
            color: var(--text-primary);
            margin-bottom: 4px;
            line-height: 1.4;
        }

        .notification-time {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .notification-reason {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 4px;
            padding: 4px 8px;
            background: var(--bg-secondary);
            border-radius: var(--radius-sm);
        }

        .empty-notifications {
            padding: 40px 20px;
            text-align: center;
            color: var(--text-muted);
        }

        .empty-notifications i {
            font-size: 2.5rem;
            margin-bottom: 12px;
            opacity: 0.5;
        }

        .empty-notifications h3 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .empty-notifications p {
            font-size: 0.875rem;
            margin: 0;
        }

        /* Compact Notification Dropdown */
        .header-actions {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .marketplace-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .marketplace-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .marketplace-btn i {
            font-size: 1rem;
        }

        .notification-dropdown {
            position: relative;
        }

        .notification-trigger {
            position: relative;
            cursor: pointer;
            padding: 8px;
            border-radius: var(--radius-md);
            transition: all 0.3s ease;
            background: transparent;
            border: none;
            color: var(--text-secondary);
        }

        .notification-trigger:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .notification-trigger i {
            font-size: 1.125rem;
        }

        .notification-badge {
            position: absolute;
            top: 4px;
            right: 4px;
            background: var(--danger-color);
            color: white;
            font-size: 0.625rem;
            font-weight: 600;
            padding: 2px 5px;
            border-radius: 10px;
            min-width: 16px;
            text-align: center;
        }

        .notification-badge.hidden {
            display: none;
        }

        .notification-menu {
            position: absolute;
            top: 100%;
            right: 0;
            width: 320px;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        .notification-menu.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .notification-menu-header {
            padding: 16px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .notification-menu-header h3 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }

        .mark-all-read {
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 0.75rem;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: var(--radius-sm);
            transition: all 0.3s ease;
        }

        .mark-all-read:hover {
            background: rgba(37, 99, 235, 0.1);
        }

        .notification-menu-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .notification-menu-item {
            padding: 12px 16px;
            border-bottom: 1px solid var(--border-color);
            transition: background 0.3s ease;
            cursor: pointer;
        }

        .notification-menu-item:hover {
            background: var(--bg-secondary);
        }

        .notification-menu-item.unread {
            background: rgba(37, 99, 235, 0.05);
            border-left: 3px solid var(--primary-color);
        }

        .notification-menu-content {
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .notification-menu-icon {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 0.75rem;
        }

        .notification-menu-icon.approved {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success-color);
        }

        .notification-menu-icon.rejected {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger-color);
        }

        .notification-menu-details {
            flex: 1;
            min-width: 0;
        }

        .notification-menu-message {
            font-size: 0.8rem;
            color: var(--text-primary);
            margin-bottom: 2px;
            line-height: 1.3;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .notification-menu-time {
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .notification-menu-reason {
            font-size: 0.7rem;
            color: var(--text-secondary);
            margin-top: 2px;
            padding: 2px 6px;
            background: var(--bg-secondary);
            border-radius: var(--radius-sm);
            display: inline-block;
        }

        .notification-menu-footer {
            padding: 12px 16px;
            border-top: 1px solid var(--border-color);
            text-align: center;
        }

        .notification-menu-footer a {
            color: var(--primary-color);
            text-decoration: none;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .notification-menu-footer a:hover {
            text-decoration: underline;
        }

        .empty-notifications-menu {
            padding: 24px 16px;
            text-align: center;
            color: var(--text-muted);
        }

        .empty-notifications-menu i {
            font-size: 1.5rem;
            margin-bottom: 8px;
            opacity: 0.5;
            display: block;
        }

        .empty-notifications-menu h3 {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .empty-notifications-menu p {
            font-size: 0.75rem;
            margin: 0;
        }

        /* Hide the old modal */
        .notifications-modal {
            display: none !important;
        }

        /* Seller Guide Section Styles */
        .seller-guide-section {
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            text-align: center;
        }

        .seller-guide-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 0 auto 10px;
        }

        .seller-guide-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(37, 99, 235, 0.3);
        }

        .seller-guide-desc {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
            margin: 0;
        }

        /* Seller Guide Modal Styles */
        .seller-guide-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10000;
            overflow-y: auto;
        }

        .seller-guide-modal-content {
            background: white;
            max-width: 900px;
            margin: 50px auto;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .seller-guide-modal-header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 25px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .seller-guide-modal-header h2 {
            margin: 0;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .modal-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            font-size: 24px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        .seller-guide-modal-body {
            padding: 30px;
            max-height: 60vh;
            overflow-y: auto;
        }

        .guide-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 15px;
        }

        .guide-tab {
            background: #f8fafc;
            border: 2px solid #e5e7eb;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #64748b;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .guide-tab:hover {
            background: #e2e8f0;
            transform: translateY(-2px);
        }

        .guide-tab.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
        }

        .guide-content {
            min-height: 400px;
        }

        .guide-tab-content {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .guide-tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .guide-tab-content h4 {
            color: var(--primary-color);
            margin-bottom: 25px;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .guide-step {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            padding: 20px;
            background: #f8fafc;
            border-radius: 10px;
            border-left: 4px solid var(--primary-color);
            transition: all 0.3s ease;
        }

        .guide-step:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .step-number {
            background: var(--primary-color);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .step-content h5 {
            color: #1f2937;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .step-content p {
            color: #64748b;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .step-content ul {
            margin: 0;
            padding-left: 20px;
        }

        .step-content li {
            color: #475569;
            margin-bottom: 8px;
            line-height: 1.5;
        }

        .step-content li::marker {
            color: var(--primary-color);
        }

        /* Tips Grid */
        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .tip-card {
            background: #f8fafc;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid var(--primary-color);
            transition: all 0.3s ease;
        }

        .tip-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .tip-icon {
            background: var(--primary-color);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .tip-card h5 {
            color: #1f2937;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .tip-card p {
            color: #64748b;
            line-height: 1.6;
        }

        .seller-guide-modal-footer {
            background: #f8fafc;
            padding: 20px 30px;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            border-top: 1px solid #e5e7eb;
        }

        .seller-guide-modal-footer .btn {
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }

        .seller-guide-modal-footer .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .seller-guide-modal-footer .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(37, 99, 235, 0.3);
        }

        .seller-guide-modal-footer .btn-secondary {
            background: white;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .seller-guide-modal-footer .btn-secondary:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .seller-guide-modal-content {
                margin: 20px;
                max-width: calc(100% - 40px);
            }

            .guide-tabs {
                flex-direction: column;
                align-items: center;
            }

            .guide-tab {
                width: 100%;
                max-width: 200px;
                justify-content: center;
            }

            .guide-step {
                flex-direction: column;
                text-align: center;
            }

            .step-number {
                align-self: center;
            }

            .tips-grid {
                grid-template-columns: 1fr;
            }

            .seller-guide-modal-footer {
                flex-direction: column;
                align-items: center;
            }

            .seller-guide-modal-footer .btn {
                width: 100%;
                max-width: 250px;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-screen" id="loginScreen">
        <div class="login-container">
            <div class="login-left">
                <div class="login-logo" onclick="goToHome()" style="cursor: pointer;" title="Go to Main Shop">
                    <i class="fas fa-store"></i>
                    EcoLoop Kenya Seller
                </div>
                <h1 class="login-title">Seller Login</h1>
                <p class="login-subtitle">Sign in to your seller dashboard</p>
                
                <form id="authForm">
                    <div class="form-group">
                        <label class="form-label">Email Address</label>
                        <input type="email" class="form-input" id="email" placeholder="Enter your email" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-input" id="password" placeholder="Enter your password" required>
                    </div>
                    
                    <div class="form-checkbox">
                        <input type="checkbox" id="remember">
                        <label for="remember">Remember me</label>
                    </div>
                    
                    <button type="submit" class="btn btn-primary" id="submitBtn">Sign In</button>
                </form>
                
                <div class="login-toggle">
                    <span>Don't have a seller account?</span>
                    <a href="../index.html" onclick="showSellerRegistration(); return false;">Register Here</a>
                </div>
                
                <div class="login-toggle" style="margin-top: 15px;">
                    <span>Need to register as a buyer?</span>
                    <a href="../index.html">Go to Main Site</a>
                </div>
                
                <div class="login-toggle" style="margin-top: 15px;">
                    <span>Admin access?</span>
                    <a href="admin-dashboard.html">Admin Dashboard</a>
                </div>
            </div>
            
            <div class="login-right">
                <div class="login-features">
                    <h3>Why Sell on EcoLoop Kenya?</h3>
                    <ul>
                        <li><i class="fas fa-check-circle"></i> Reach millions of buyers across Kenya</li>
                        <li><i class="fas fa-check-circle"></i> Easy product listing with photos</li>
                        <li><i class="fas fa-check-circle"></i> Secure payment processing</li>
                        <li><i class="fas fa-check-circle"></i> Real-time sales analytics</li>
                        <li><i class="fas fa-check-circle"></i> 24/7 seller support</li>
                    </ul>
                    
                    <div class="seller-guide-section">
                        <button class="seller-guide-btn" onclick="toggleSellerGuide()">
                            <i class="fas fa-book-open"></i> Complete Seller Guide
                        </button>
                        <p class="seller-guide-desc">Learn everything about selling successfully on EcoLoop Kenya</p>
                    </div>
                </div>
                
                <div class="login-stats">
                    <div class="login-stat">
                        <span class="login-stat-number">50,000+</span>
                        <span class="login-stat-label">Active Sellers</span>
                    </div>
                    <div class="login-stat">
                        <span class="login-stat-number">2M+</span>
                        <span class="login-stat-label">Monthly Buyers</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Seller Guide Modal -->
    <div class="seller-guide-modal" id="sellerGuideModal">
        <div class="seller-guide-modal-content">
            <div class="seller-guide-modal-header">
                <h2><i class="fas fa-book-open"></i> Complete Seller Guide</h2>
                <button class="modal-close" onclick="toggleSellerGuide()">&times;</button>
            </div>
            
            <div class="seller-guide-modal-body">
                <div class="guide-tabs">
                    <button class="guide-tab active" onclick="showGuideTab('getting-started')">
                        <i class="fas fa-rocket"></i> Getting Started
                    </button>
                    <button class="guide-tab" onclick="showGuideTab('listing-products')">
                        <i class="fas fa-box"></i> Listing Products
                    </button>
                    <button class="guide-tab" onclick="showGuideTab('managing-orders')">
                        <i class="fas fa-shopping-bag"></i> Managing Orders
                    </button>
                    <button class="guide-tab" onclick="showGuideTab('payments')">
                        <i class="fas fa-credit-card"></i> Payments
                    </button>
                    <button class="guide-tab" onclick="showGuideTab('tips')">
                        <i class="fas fa-lightbulb"></i> Success Tips
                    </button>
                </div>

                <div class="guide-content" id="guideContent">
                    <!-- Getting Started Tab -->
                    <div class="guide-tab-content active" id="getting-started">
                        <h4><i class="fas fa-rocket"></i> Getting Started as a Seller</h4>
                        
                        <div class="guide-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h5>Register Your Account</h5>
                                <p>Complete the registration form with your business details.</p>
                                <ul>
                                    <li>Business name and description</li>
                                    <li>Contact information</li>
                                    <li>Business location</li>
                                    <li>Valid email address</li>
                                </ul>
                            </div>
                        </div>

                        <div class="guide-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h5>Complete Your Profile</h5>
                                <p>Add detailed information to build trust with buyers.</p>
                                <ul>
                                    <li>Profile picture and logo</li>
                                    <li>Business description</li>
                                    <li>Operating hours</li>
                                    <li>Return policy</li>
                                </ul>
                            </div>
                        </div>

                        <div class="guide-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h5>Start Listing Products</h5>
                                <p>Add your first products to begin selling immediately.</p>
                                <ul>
                                    <li>High-quality photos</li>
                                    <li>Detailed descriptions</li>
                                    <li>Competitive pricing</li>
                                    <li>Wait for admin approval</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Listing Products Tab -->
                    <div class="guide-tab-content" id="listing-products" style="display: none;">
                        <h4><i class="fas fa-box"></i> Listing Your Products</h4>
                        
                        <div class="guide-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h5>Product Photography</h5>
                                <p>High-quality photos increase sales by 40%.</p>
                                <ul>
                                    <li>Use clear, well-lit photos</li>
                                    <li>Show multiple angles</li>
                                    <li>Include size reference</li>
                                    <li>Highlight any defects</li>
                                </ul>
                            </div>
                        </div>

                        <div class="guide-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h5>Write Compelling Descriptions</h5>
                                <p>Detailed descriptions build trust and reduce questions.</p>
                                <ul>
                                    <li>Include brand, model, and specifications</li>
                                    <li>Describe condition honestly</li>
                                    <li>Mention original price and purchase date</li>
                                    <li>Include warranty information</li>
                                </ul>
                            </div>
                        </div>

                        <div class="guide-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h5>Set Competitive Prices</h5>
                                <p>Research similar products to price competitively.</p>
                                <ul>
                                    <li>Check current market prices</li>
                                    <li>Consider product condition</li>
                                    <li>Factor in shipping costs</li>
                                    <li>Include EcoLoop Kenya fees (5%)</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Managing Orders Tab -->
                    <div class="guide-tab-content" id="managing-orders" style="display: none;">
                        <h4><i class="fas fa-shopping-bag"></i> Managing Orders</h4>
                        
                        <div class="guide-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h5>Order Notifications</h5>
                                <p>You'll receive instant notifications for new orders.</p>
                                <ul>
                                    <li>Email notifications</li>
                                    <li>Dashboard alerts</li>
                                    <li>Buyer contact information</li>
                                    <li>Order details and shipping address</li>
                                </ul>
                            </div>
                        </div>

                        <div class="guide-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h5>Processing Orders</h5>
                                <p>Acknowledge orders within 24 hours.</p>
                                <ul>
                                    <li>Confirm product availability</li>
                                    <li>Package items securely</li>
                                    <li>Arrange shipping</li>
                                    <li>Update order status</li>
                                </ul>
                            </div>
                        </div>

                        <div class="guide-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h5>Customer Communication</h5>
                                <p>Keep buyers informed throughout the process.</p>
                                <ul>
                                    <li>Respond to messages promptly</li>
                                    <li>Provide order updates</li>
                                    <li>Handle questions professionally</li>
                                    <li>Resolve issues quickly</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Payments Tab -->
                    <div class="guide-tab-content" id="payments" style="display: none;">
                        <h4><i class="fas fa-credit-card"></i> Payments & Earnings</h4>
                        
                        <div class="guide-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h5>Payment Methods</h5>
                                <p>EcoLoop Kenya supports multiple payment options.</p>
                                <ul>
                                    <li>M-Pesa (most popular)</li>
                                    <li>Bank transfers</li>
                                    <li>Credit/Debit cards</li>
                                    <li>Cash on delivery (optional)</li>
                                </ul>
                            </div>
                        </div>

                        <div class="guide-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h5>Fee Structure</h5>
                                <p>Transparent and competitive fees.</p>
                                <ul>
                                    <li>5% commission on sales</li>
                                    <li>No listing fees</li>
                                    <li>No monthly subscription</li>
                                    <li>Payment processing fees apply</li>
                                </ul>
                            </div>
                        </div>

                        <div class="guide-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h5>Payout Schedule</h5>
                                <p>Get paid quickly after delivery confirmation.</p>
                                <ul>
                                    <li>3-day holding period</li>
                                    <li>Weekly payouts (Mondays)</li>
                                    <li>Direct bank transfers</li>
                                    <li>Detailed earnings reports</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Success Tips Tab -->
                    <div class="guide-tab-content" id="tips" style="display: none;">
                        <h4><i class="fas fa-lightbulb"></i> Success Tips & Best Practices</h4>
                        
                        <div class="tips-grid">
                            <div class="tip-card">
                                <div class="tip-icon">
                                    <i class="fas fa-star"></i>
                                </div>
                                <h5>Build Your Reputation</h5>
                                <p>Maintain 5-star ratings through excellent service.</p>
                            </div>

                            <div class="tip-card">
                                <div class="tip-icon">
                                    <i class="fas fa-camera"></i>
                                </div>
                                <h5>Professional Photos</h5>
                                <p>Invest time in photography - it directly impacts sales.</p>
                            </div>

                            <div class="tip-card">
                                <div class="tip-icon">
                                    <i class="fas fa-comments"></i>
                                </div>
                                <h5>Fast Response</h5>
                                <p>Respond to buyer messages within 2 hours.</p>
                            </div>

                            <div class="tip-card">
                                <div class="tip-icon">
                                    <i class="fas fa-tags"></i>
                                </div>
                                <h5>Competitive Pricing</h5>
                                <p>Research market prices and adjust based on demand.</p>
                            </div>

                            <div class="tip-card">
                                <div class="tip-icon">
                                    <i class="fas fa-shipping-fast"></i>
                                </div>
                                <h5>Quick Shipping</h5>
                                <p>Ship within 24 hours to earn buyer trust.</p>
                            </div>

                            <div class="tip-card">
                                <div class="tip-icon">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <h5>Track Performance</h5>
                                <p>Use dashboard analytics to optimize your listings.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="seller-guide-modal-footer">
                <button class="btn btn-primary" onclick="startSelling()">
                    <i class="fas fa-rocket"></i> Start Selling Now
                </button>
                <button class="btn btn-secondary" onclick="downloadSellerGuide()">
                    <i class="fas fa-download"></i> Download Guide
                </button>
            </div>
        </div>
    </div>

    <!-- Dashboard Screen -->
    <div class="dashboard-screen" id="dashboardScreen">
        <header class="dashboard-header">
            <div class="dashboard-header-content">
                <div class="dashboard-logo" onclick="goToHome()" style="cursor: pointer;" title="Go to Main Shop">
                    <i class="fas fa-store"></i>
                    EcoLoop Kenya Seller
                </div>
                <div class="dashboard-user">
                    <div class="user-info">
                    <div class="user-avatar" id="userAvatar">S</div>
                    <div>
                        <div class="user-name" id="userName">Seller Name</div>
                        <div class="user-email" id="userEmail">seller@example.com</div>
                    </div>
                    <div class="header-actions">
                        <button class="marketplace-btn" onclick="visitMarketplace()" title="Visit Marketplace">
                            <i class="fas fa-shopping-cart"></i>
                            <span>Marketplace</span>
                        </button>
                        <button class="marketplace-btn" onclick="openMessages()" title="Messages">
                            <i class="fas fa-envelope"></i>
                            <span class="notification-badge" id="messageBadge" style="background: var(--info-color);">0</span>
                            <span>Messages</span>
                        </button>
                        <div class="notification-dropdown" id="notificationDropdown">
                            <div class="notification-trigger" onclick="toggleNotificationDropdown()">
                                <i class="fas fa-bell"></i>
                                <span class="notification-badge" id="notificationBadge">0</span>
                            </div>
                            <div class="notification-menu" id="notificationMenu">
                                <div class="notification-menu-header">
                                    <h3>Notifications</h3>
                                    <button class="mark-all-read" onclick="markAllNotificationsAsRead()">Mark all read</button>
                                </div>
                                <div class="notification-menu-list" id="notificationMenuList">
                                    <!-- Notifications will be loaded here -->
                                </div>
                                <div class="notification-menu-footer">
                                    <a href="#" onclick="showAllNotifications(); return false;">View all notifications</a>
                                </div>
                            </div>
                        </div>
                        <button class="logout-btn" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <div class="dashboard-container">
            <aside class="dashboard-sidebar">
                <ul class="sidebar-menu">
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link active" onclick="showSection('overview'); return false;">
                            <i class="fas fa-chart-line"></i> Overview
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link" onclick="showSection('products'); return false;">
                            <i class="fas fa-box"></i> My Products
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link" onclick="showSection('orders'); return false;">
                            <i class="fas fa-shopping-cart"></i> Orders
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link" onclick="showSection('analytics'); return false;">
                            <i class="fas fa-chart-bar"></i> Analytics
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link" onclick="showSection('settings'); return false;">
                            <i class="fas fa-cog"></i> Settings
                        </a>
                    </li>
                </ul>
            </aside>

            <main class="dashboard-content">
                <!-- Overview Section -->
                <div id="overview-section" class="dashboard-section">
                    <div class="dashboard-welcome">
                        <h1 class="welcome-title">Welcome back, <span id="sellerName">Seller</span>!</h1>
                        <p class="welcome-subtitle">Here's what's happening with your store today.</p>
                    </div>

                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <div class="stat-icon products">
                                <i class="fas fa-box"></i>
                            </div>
                            <div class="stat-number" id="totalProducts">0</div>
                            <div class="stat-label">Total Products</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon orders">
                                <i class="fas fa-shopping-cart"></i>
                            </div>
                            <div class="stat-number" id="totalOrders">0</div>
                            <div class="stat-label">Total Orders</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon revenue">
                                <i class="fas fa-dollar-sign"></i>
                            </div>
                            <div class="stat-number" id="totalRevenue">KES 0</div>
                            <div class="stat-label">Total Revenue</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon views">
                                <i class="fas fa-eye"></i>
                            </div>
                            <div class="stat-number" id="totalViews">0</div>
                            <div class="stat-label">Product Views</div>
                        </div>
                    </div>

                    <div class="dashboard-charts">
                        <div class="chart-card">
                            <h3>Recent Sales</h3>
                            <div class="chart-placeholder">
                                <i class="fas fa-chart-line"></i>
                                <p>Sales analytics will be displayed here</p>
                            </div>
                        </div>
                        <div class="chart-card">
                            <h3>Popular Products</h3>
                            <div class="chart-placeholder">
                                <i class="fas fa-chart-bar"></i>
                                <p>Product performance will be displayed here</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- My Products Section -->
                <div id="products-section" class="dashboard-section" style="display: none;">
                    <div class="section-header">
                        <div>
                            <h2 class="section-title">My Products</h2>
                            <p class="section-subtitle">Manage your product listings  All products require admin approval before appearing on the marketplace</p>
                        </div>
                        <button class="btn btn-primary" onclick="showAddProductModal()">
                            <i class="fas fa-plus"></i> Add Product
                        </button>
                    </div>
                    
                    <div class="approval-notice" id="approvalNotice" style="display: none;">
                        <div style="background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.3); border-radius: var(--radius-md); padding: 16px; margin-bottom: 24px; display: flex; align-items: center; gap: 12px;">
                            <i class="fas fa-info-circle" style="color: var(--warning-color); font-size: 1.25rem;"></i>
                            <div>
                                <strong>Admin Approval Required:</strong> Your products will be reviewed by an administrator before being published to the marketplace. You'll be notified once approved.
                            </div>
                        </div>
                    </div>
                    
                    <div class="products-filters">
                        <div class="filter-group">
                            <select class="form-input" id="productFilter" onchange="filterProducts()">
                                <option value="all">All Products</option>
                                <option value="pending">Pending</option>
                                <option value="approved">Approved</option>
                                <option value="rejected">Rejected</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <input type="text" class="form-input" id="productSearch" placeholder="Search products..." onkeyup="searchProducts()">
                        </div>
                    </div>

                    <div class="products-grid" id="productsGrid">
                        <!-- Products will be dynamically added here -->
                    </div>
                    <div class="empty-state" id="emptyState" style="display: none;">
                        <i class="fas fa-box-open"></i>
                        <h3>No products yet</h3>
                        <p>Start by adding your first product to your store.</p>
                        <button class="btn btn-primary" onclick="showAddProductModal()">
                            <i class="fas fa-plus"></i> Add Your First Product
                        </button>
                    </div>
                </div>

                <!-- Orders Section -->
                <div id="orders-section" class="dashboard-section" style="display: none;">
                    <div class="section-header">
                        <div>
                            <h2 class="section-title">Orders</h2>
                            <p class="section-subtitle">Manage customer orders</p>
                        </div>
                    </div>

                    <div class="orders-filters">
                        <div class="filter-group">
                            <select class="form-input" id="orderFilter" onchange="filterOrders()">
                                <option value="all">All Orders</option>
                                <option value="pending">Pending</option>
                                <option value="processing">Processing</option>
                                <option value="shipped">Shipped</option>
                                <option value="delivered">Delivered</option>
                                <option value="cancelled">Cancelled</option>
                            </select>
                        </div>
                    </div>

                    <div class="orders-list" id="ordersList">
                        <!-- Orders will be dynamically added here -->
                    </div>
                    <div class="empty-state" id="ordersEmptyState" style="display: none;">
                        <i class="fas fa-shopping-cart"></i>
                        <h3>No orders yet</h3>
                        <p>When customers place orders, they will appear here.</p>
                    </div>
                </div>

                <!-- Analytics Section -->
                <div id="analytics-section" class="dashboard-section" style="display: none;">
                    <div class="section-header">
                        <div>
                            <h2 class="section-title">Analytics</h2>
                            <p class="section-subtitle">Track your store performance</p>
                        </div>
                        <div class="date-filter">
                            <select class="form-input" id="dateRange" onchange="updateAnalytics()">
                                <option value="7days">Last 7 Days</option>
                                <option value="30days">Last 30 Days</option>
                                <option value="90days">Last 90 Days</option>
                                <option value="1year">Last Year</option>
                            </select>
                        </div>
                    </div>

                    <div class="analytics-grid">
                        <div class="analytics-card">
                            <h3>Sales Overview</h3>
                            <div class="analytics-chart">
                                <i class="fas fa-chart-line"></i>
                                <p>Sales trends will be displayed here</p>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <h3>Top Products</h3>
                            <div class="top-products-list">
                                <!-- Top products will be dynamically added here -->
                            </div>
                        </div>
                        <div class="analytics-card">
                            <h3>Customer Insights</h3>
                            <div class="analytics-chart">
                                <i class="fas fa-users"></i>
                                <p>Customer analytics will be displayed here</p>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <h3>Revenue Breakdown</h3>
                            <div class="analytics-chart">
                                <i class="fas fa-chart-pie"></i>
                                <p>Revenue breakdown will be displayed here</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Section -->
                <div id="settings-section" class="dashboard-section" style="display: none;">
                    <div class="section-header">
                        <div>
                            <h2 class="section-title">Settings</h2>
                            <p class="section-subtitle">Manage your account settings</p>
                        </div>
                    </div>

                    <div class="settings-grid">
                        <div class="settings-card">
                            <h3>Profile Information</h3>
                            <form id="profileForm">
                                <div class="form-group">
                                    <label class="form-label">Business Name</label>
                                    <input type="text" class="form-input" id="businessName" value="${currentUser.business || ''}">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Email</label>
                                    <input type="email" class="form-input" id="sellerEmail" value="${currentUser.email}" readonly>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Phone</label>
                                    <input type="tel" class="form-input" id="sellerPhone" placeholder="+254 XXX XXX XXX">
                                </div>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </form>
                        </div>

                        <div class="settings-card">
                            <h3>Store Settings</h3>
                            <form id="storeForm">
                                <div class="form-group">
                                    <label class="form-label">Store Description</label>
                                    <textarea class="form-input" rows="4" placeholder="Describe your store..."></textarea>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Return Policy</label>
                                    <textarea class="form-input" rows="3" placeholder="Enter your return policy..."></textarea>
                                </div>
                                <button type="submit" class="btn btn-primary">Save Settings</button>
                            </form>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast" class="toast"></div>

    <!-- Notifications Modal -->
    <div class="notifications-modal" id="notificationsModal">
        <div class="notifications-content">
            <div class="notifications-header">
                <h2 class="notifications-title">Notifications</h2>
                <button class="notifications-close" onclick="closeNotifications()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="notifications-list" id="notificationsList">
                <!-- Notifications will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Add/Edit Product Modal -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Add New Product</h2>
                <button class="modal-close" onclick="closeProductModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="productForm" onsubmit="saveProduct(event)">
                <!-- Basic Information -->
                <div class="form-section">
                    <h3 class="section-subtitle">Basic Information</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Product Title *</label>
                            <input type="text" class="form-input" id="productName" required placeholder="e.g., iPhone 12 Pro 128GB">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Category *</label>
                            <select class="form-input" id="productCategory" required>
                                <option value="">Select category</option>
                                <option value="electronics">Electronics & Gadgets</option>
                                <option value="fashion">Fashion & Accessories</option>
                                <option value="home">Home & Furniture</option>
                                <option value="sports">Sports & Outdoors</option>
                                <option value="books">Books & Media</option>
                                <option value="toys">Toys & Games</option>
                                <option value="automotive">Automotive & Parts</option>
                                <option value="appliances">Home Appliances</option>
                                <option value="furniture">Furniture</option>
                                <option value="pets">Pet Supplies</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Price (KES) *</label>
                            <input type="number" class="form-input" id="productPrice" required min="1" placeholder="0.00">
                            <small class="form-hint">Set a competitive price for your item</small>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Original Price (KES)</label>
                            <input type="number" class="form-input" id="originalPrice" min="1" placeholder="0.00">
                            <small class="form-hint">Original price when new (optional)</small>
                        </div>
                    </div>
                </div>

                <!-- Condition & Age -->
                <div class="form-section">
                    <h3 class="section-subtitle">Condition & Age</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Condition *</label>
                            <select class="form-input" id="productCondition" required>
                                <option value="">Select condition</option>
                                <option value="new">New (Never Used)</option>
                                <option value="like-new">Like New (Excellent)</option>
                                <option value="good">Good (Used but Good)</option>
                                <option value="fair">Fair (Used with Wear)</option>
                                <option value="poor">Poor (Heavily Used)</option>
                                <option value="for-parts">For Parts/Not Working</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Age of Item *</label>
                            <select class="form-input" id="itemAge" required>
                                <option value="">Select age</option>
                                <option value="less-than-6-months">Less than 6 months</option>
                                <option value="6-months-to-1-year">6 months to 1 year</option>
                                <option value="1-to-2-years">1 to 2 years</option>
                                <option value="2-to-5-years">2 to 5 years</option>
                                <option value="more-than-5-years">More than 5 years</option>
                                <option value="vintage">Vintage (20+ years)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Condition Details</label>
                        <textarea class="form-input" id="conditionDetails" rows="3" placeholder="Describe the condition in detail (scratches, defects, wear and tear, etc.)"></textarea>
                    </div>
                </div>

                <!-- Reason for Selling -->
                <div class="form-section">
                    <h3 class="section-subtitle">Reason for Selling</h3>
                    <div class="form-group">
                        <label class="form-label">Why are you selling this item? *</label>
                        <select class="form-input" id="sellReason" required>
                            <option value="">Select reason</option>
                            <option value="upgrading">Upgrading to newer model</option>
                            <option value="not-using">Not using anymore</option>
                            <option value="need-money">Need money urgently</option>
                            <option value="moving-house">Moving house (can't take with)</option>
                            <option value="gift-didnt-like">Received as gift, don't need it</option>
                            <option value="duplicate">Have duplicate item</option>
                            <option value="lifestyle-change">Lifestyle change</option>
                            <option value="business-closure">Business closure</option>
                            <option value="other">Other reason</option>
                        </select>
                    </div>
                    
                    <div class="form-group" id="otherReasonGroup" style="display: none;">
                        <label class="form-label">Please specify other reason *</label>
                        <input type="text" class="form-input" id="otherReason" placeholder="Explain why you're selling this item">
                    </div>
                </div>

                <!-- Detailed Description -->
                <div class="form-section">
                    <h3 class="section-subtitle">Detailed Description</h3>
                    <div class="form-group">
                        <label class="form-label">Product Description *</label>
                        <textarea class="form-input" id="productDescription" required rows="5" placeholder="Provide a detailed description including features, specifications, usage history, etc."></textarea>
                        <small class="form-hint">Be as detailed as possible to attract serious buyers</small>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Brand/Manufacturer</label>
                            <input type="text" class="form-input" id="productBrand" placeholder="e.g., Apple, Samsung, Nike">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Model/Version</label>
                            <input type="text" class="form-input" id="productModel" placeholder="e.g., iPhone 12 Pro, Galaxy S21">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Color</label>
                            <input type="text" class="form-input" id="productColor" placeholder="e.g., Black, Silver, Red">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Size/Dimensions</label>
                            <input type="text" class="form-input" id="productSize" placeholder="e.g., Large, 42 inch, 200cm x 150cm">
                        </div>
                    </div>
                </div>

                <!-- Usage & History -->
                <div class="form-section">
                    <h3 class="section-subtitle">Usage & History</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Frequency of Use</label>
                            <select class="form-input" id="usageFrequency">
                                <option value="">Select frequency</option>
                                <option value="daily">Daily</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                                <option value="rarely">Rarely</option>
                                <option value="never">Never (brand new)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Original Owner?</label>
                            <select class="form-input" id="originalOwner">
                                <option value="">Select</option>
                                <option value="yes">Yes, I'm the first owner</option>
                                <option value="no">No, I bought it secondhand</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Accessories Included</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" id="originalBox" value="original-box">
                                <span>Original Box/Packaging</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" id="manual" value="manual">
                                <span>User Manual/Instructions</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" id="warranty" value="warranty">
                                <span>Warranty Card</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" id="receipt" value="receipt">
                                <span>Original Receipt</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" id="charger" value="charger">
                                <span>Charger/Cables</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" id="case" value="case">
                                <span>Case/Cover</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Location & Delivery -->
                <div class="form-section">
                    <h3 class="section-subtitle">Location & Delivery</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Location *</label>
                            <input type="text" class="form-input" id="productLocation" required placeholder="e.g., Nairobi, Mombasa, Kisumu">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Preferred Meeting Place</label>
                            <input type="text" class="form-input" id="meetingPlace" placeholder="e.g., Shopping mall, coffee shop, police station">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Delivery Options</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" id="pickupOnly" value="pickup-only">
                                <span>Pickup Only</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" id="canDeliver" value="can-deliver">
                                <span>Can Deliver (within my area)</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" id="courier" value="courier">
                                <span>Shipping/Courier Available</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Delivery Cost (KES)</label>
                            <input type="number" class="form-input" id="deliveryCost" min="0" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Negotiable Price?</label>
                            <select class="form-input" id="negotiable">
                                <option value="no">Not Negotiable</option>
                                <option value="slightly">Slightly Negotiable</option>
                                <option value="very">Very Negotiable</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Product Images -->
                <div class="form-section">
                    <h3 class="section-subtitle">Product Images</h3>
                    <div class="image-upload-area" onclick="document.getElementById('productImages').click()">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Click to upload images or drag and drop</p>
                        <p class="text-muted">Upload clear, well-lit photos from different angles (PNG, JPG up to 5MB each)</p>
                        <input type="file" id="productImages" multiple accept="image/*" style="display: none;" onchange="handleImageUpload(event)">
                    </div>
                    <div class="image-preview" id="imagePreview"></div>
                    <small class="form-hint">Include photos of: Front, back, sides, any defects, and accessories included</small>
                </div>

                <!-- Additional Information -->
                <div class="form-section">
                    <h3 class="section-subtitle">Additional Information</h3>
                    <div class="form-group">
                        <label class="form-label">Special Notes</label>
                        <textarea class="form-input" id="specialNotes" rows="3" placeholder="Any additional information buyers should know (repairs, special features, etc.)"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Tags (comma separated)</label>
                        <input type="text" class="form-input" id="productTags" placeholder="e.g., smartphone, apple, 5g, unlocked">
                        <small class="form-hint">Helps buyers find your product easily</small>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeProductModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="saveProductBtn">
                        <i class="fas fa-save"></i> Save Product
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Product Details Modal -->
    <div id="productDetailsModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 class="modal-title">Product Details</h2>
                <button class="modal-close" onclick="closeProductDetailsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="productDetailsContent">
                <!-- Product details will be dynamically added here -->
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentUser = null;
        let editingProductId = null;
        let uploadedImages = [];

        // Clean up all unapproved products from the system
        function cleanupUnapprovedProducts() {
            console.log(' Starting cleanup of unapproved products...');
            
            // Get all products from storage
            const adminProducts = JSON.parse(localStorage.getItem('products') || '[]');
            const sellerProducts = JSON.parse(localStorage.getItem('sellerProducts') || '[]');
            
            // Filter only approved products
            const approvedAdminProducts = adminProducts.filter(p => p.status === 'approved');
            const approvedSellerProducts = sellerProducts.filter(p => p.status === 'approved');
            
            // Count removed products
            const removedAdminCount = adminProducts.length - approvedAdminProducts.length;
            const removedSellerCount = sellerProducts.length - approvedSellerProducts.length;
            const totalRemoved = removedAdminCount + removedSellerCount;
            
            // Update storage with only approved products
            localStorage.setItem('products', JSON.stringify(approvedAdminProducts));
            localStorage.setItem('sellerProducts', JSON.stringify(approvedSellerProducts));
            
            // Reload products to reflect changes
            loadSellerProducts();
            
            console.log(` Cleanup complete! Removed ${totalRemoved} unapproved products:`);
            console.log(`   - Admin products removed: ${removedAdminCount}`);
            console.log(`   - Seller products removed: ${removedSellerCount}`);
            console.log(`   - Remaining approved products: ${approvedAdminProducts.length + approvedSellerProducts.length}`);
            
            if (totalRemoved > 0) {
                showToast(` Cleaned up ${totalRemoved} unapproved products from the system`, 'success');
            }
            
            return {
                removed: totalRemoved,
                remaining: approvedAdminProducts.length + approvedSellerProducts.length,
                adminRemoved: removedAdminCount,
                sellerRemoved: removedSellerCount
            };
        }

        // Auto-cleanup function that runs on page load
        function autoCleanupUnapproved() {
            const cleanupResult = cleanupUnapprovedProducts();
            
            // Show notification if products were removed
            if (cleanupResult.removed > 0) {
                console.log(' Auto-cleanup removed unapproved products on seller dashboard load');
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            checkAuthStatus();
            setupEventListeners();
            autoCleanupUnapproved();
        });

        // Setup event listeners
        function setupEventListeners() {
            document.getElementById('authForm').addEventListener('submit', handleAuth);
            
            // Close modals on backdrop click
            document.getElementById('productModal').addEventListener('click', function(e) {
                if (e.target === this) closeProductModal();
            });
            
            document.getElementById('productDetailsModal').addEventListener('click', function(e) {
                if (e.target === this) closeProductDetailsModal();
            });
            
            // Settings forms
            const profileForm = document.getElementById('profileForm');
            if (profileForm) {
                profileForm.addEventListener('submit', saveSettings);
            }
            
            const storeForm = document.getElementById('storeForm');
            if (storeForm) {
                storeForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    showToast('Store settings saved successfully!', 'success');
                });
            }
            
            // Product form - Other reason field toggle
            const sellReasonSelect = document.getElementById('sellReason');
            if (sellReasonSelect) {
                sellReasonSelect.addEventListener('change', function() {
                    const otherReasonGroup = document.getElementById('otherReasonGroup');
                    const otherReasonInput = document.getElementById('otherReason');
                    
                    if (this.value === 'other') {
                        otherReasonGroup.style.display = 'block';
                        otherReasonInput.required = true;
                    } else {
                        otherReasonGroup.style.display = 'none';
                        otherReasonInput.required = false;
                        otherReasonInput.value = '';
                    }
                });
            }
        }

        // Check authentication status
        function checkAuthStatus() {
            // First check if there's a userSession from our new auth system
            const userSession = localStorage.getItem('userSession');
            if (userSession) {
                try {
                    const session = JSON.parse(userSession);
                    if (session.user && session.user.type === 'seller') {
                        currentUser = session.user;
                        // Set sellerData for compatibility
                        localStorage.setItem('sellerData', JSON.stringify(currentUser));
                        showDashboard();
                        return;
                    }
                } catch (error) {
                    console.error('Invalid session data:', error);
                }
            }
            
            // Fallback to currentUser (old system)
            const currentUserSession = localStorage.getItem('currentUser');
            if (currentUserSession) {
                const user = JSON.parse(currentUserSession);
                if (user.type === 'seller') {
                    // Get full seller data
                    const sellerData = localStorage.getItem('sellerData');
                    if (sellerData) {
                        currentUser = JSON.parse(sellerData);
                        showDashboard();
                        return;
                    }
                }
            }
            
            // Fallback to sellerData only
            const sellerData = localStorage.getItem('sellerData');
            if (sellerData) {
                currentUser = JSON.parse(sellerData);
                showDashboard();
            } else {
                showLoginScreen();
            }
        }

        // Handle authentication (login only)
        async function handleAuth(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            console.log('Seller dashboard login attempt:', { email });

            let seller = null;
            
            // First try to find seller in MongoDB
            try {
                const response = await fetch('https://my-backend-1-jk7w.onrender.com/api/data');
                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        seller = result.data.find(s => 
                            s.email === email && 
                            s.password === password && 
                            s.type === 'seller' &&
                            !s.deleted
                        );
                        if (seller) {
                            console.log(' Seller found in MongoDB:', seller.email);
                        }
                    }
                }
            } catch (mongoError) {
                console.log(' MongoDB login check failed, using localStorage:', mongoError.message);
            }
            
            // If not found in MongoDB, check localStorage
            if (!seller) {
                const registeredSellers = JSON.parse(localStorage.getItem('registeredSellers') || '[]');
                console.log('Checking localStorage sellers:', registeredSellers.length);
                
                // Try multiple ways to find the seller
                seller = registeredSellers.find(s => s.email === email && s.password === password);
                
                // If not found, try case-insensitive email match
                if (!seller) {
                    seller = registeredSellers.find(s => 
                        s.email.toLowerCase() === email.toLowerCase() && s.password === password
                    );
                }
                
                if (seller) {
                    console.log(' Seller found in localStorage:', seller.email);
                }
            }
            
            console.log('Final seller found:', seller);
            
            if (seller) {
                console.log('Seller status:', seller.status);
                
                // Check if seller is approved (if status field exists)
                if (seller.status && seller.status !== 'approved') {
                    if (seller.status === 'pending') {
                        showToast('Your seller account is pending approval. Please wait for admin approval.', 'warning');
                    } else if (seller.status === 'rejected') {
                        showToast('Your seller account has been rejected. Please contact admin.', 'error');
                    } else {
                        showToast('Invalid seller account status. Please contact admin.', 'error');
                    }
                    return;
                }
                
                // If no status field, assume approved (for backward compatibility)
                if (!seller.status) {
                    seller.status = 'approved';
                }
                
                currentUser = seller;
                localStorage.setItem('sellerData', JSON.stringify(seller));
                
                // Create proper userSession for new auth system
                const sessionToken = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                const userSession = {
                    token: sessionToken,
                    user: {
                        id: seller.id,
                        name: seller.name, 
                        email: seller.email,
                        type: 'seller',
                        business: seller.business || '',
                        phone: seller.phone || '',
                        location: seller.location || '',
                        sellerRating: seller.sellerRating || 0
                    },
                    timestamp: Date.now(),
                    rememberMe: true
                };
                localStorage.setItem('userSession', JSON.stringify(userSession));
                
                // Also set currentUser for backward compatibility
                const currentUserData = { 
                    id: seller.id,
                    name: seller.name, 
                    email: seller.email,
                    type: 'seller',
                    business: seller.business || ''
                };
                localStorage.setItem('currentUser', JSON.stringify(currentUserData));
                
                showDashboard();
            } else {
                console.log('Login failed - seller not found');
                showToast('Invalid email or password', 'error');
            }
        }

        // Show dashboard
        function showDashboard() {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('dashboardScreen').style.display = 'block';
            
            // Update user info
            if (currentUser) {
                document.getElementById('userName').textContent = currentUser.name || 'Seller';
                document.getElementById('userEmail').textContent = currentUser.email;
                document.getElementById('sellerName').textContent = currentUser.name || 'Seller';
                
                // Update avatar
                const initials = (currentUser.name || 'S').split(' ').map(n => n[0]).join('').toUpperCase();
                document.getElementById('userAvatar').textContent = initials;
                
                // Load notifications
                updateNotificationBadge();
                
                // Load message count
                updateMessageCount();
                
                // Load dashboard data
                loadDashboardData();
            }
        }

        // Show login screen
        function showLoginScreen() {
            document.getElementById('loginScreen').style.display = 'flex';
            document.getElementById('dashboardScreen').style.display = 'none';
        }

        // Load dashboard data
        function loadDashboardData() {
            // Show overview section by default
            showSection('overview');
        }

        // Load products
        function loadProducts(products) {
            const productsGrid = document.getElementById('productsGrid');
            const emptyState = document.getElementById('emptyState');
            
            if (products.length === 0) {
                productsGrid.style.display = 'none';
                emptyState.style.display = 'block';
            } else {
                productsGrid.style.display = 'grid';
                emptyState.style.display = 'none';
                
                productsGrid.innerHTML = products.map(product => `
                    <div class="product-card">
                        <img src="${product.image || 'https://picsum.photos/seed/product${product.id}/280/200.jpg'}" alt="${product.name}" class="product-image">
                        <div class="product-info">
                            <h3 class="product-title">${product.name}</h3>
                            <div class="product-price">KES ${product.price}</div>
                            <span class="product-status status-${product.status || 'pending'}">${(product.status || 'pending').toUpperCase()}</span>
                            <div class="product-actions">
                                <button class="btn-edit" onclick="viewProductDetails(${product.id})">
                                    <i class="fas fa-eye"></i> View
                                </button>
                                <button class="btn-edit" onclick="editProduct(${product.id})">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                                <button class="btn-delete" onclick="deleteProduct(${product.id})">
                                    <i class="fas fa-trash"></i> Delete
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        }

        // Product Management Functions
        function showAddProductModal() {
            editingProductId = null;
            uploadedImages = [];
            document.getElementById('modalTitle').textContent = 'Add New Product';
            document.getElementById('productForm').reset();
            document.getElementById('imagePreview').innerHTML = '';
            document.getElementById('productModal').classList.add('active');
        }

        function editProduct(productId) {
            const product = getProduct(productId);
            if (!product) return;
            
            editingProductId = productId;
            
            // Populate basic fields
            document.getElementById('productName').value = product.name || '';
            document.getElementById('productCategory').value = product.category || '';
            document.getElementById('productPrice').value = product.price || '';
            document.getElementById('originalPrice').value = product.originalPrice || '';
            document.getElementById('productCondition').value = product.condition || '';
            document.getElementById('itemAge').value = product.itemAge || '';
            document.getElementById('conditionDetails').value = product.conditionDetails || '';
            document.getElementById('sellReason').value = product.sellReason || '';
            
            // Handle other reason field
            const otherReasonGroup = document.getElementById('otherReasonGroup');
            const otherReasonInput = document.getElementById('otherReason');
            if (product.sellReason === 'other') {
                otherReasonGroup.style.display = 'block';
                otherReasonInput.value = product.otherReason || '';
                otherReasonInput.required = true;
            } else {
                otherReasonGroup.style.display = 'none';
                otherReasonInput.required = false;
                otherReasonInput.value = '';
            }
            
            // Populate detailed fields
            document.getElementById('productDescription').value = product.description || '';
            document.getElementById('productBrand').value = product.brand || '';
            document.getElementById('productModel').value = product.model || '';
            document.getElementById('productColor').value = product.color || '';
            document.getElementById('productSize').value = product.size || '';
            document.getElementById('usageFrequency').value = product.usageFrequency || '';
            document.getElementById('originalOwner').value = product.originalOwner || '';
            
            // Populate checkboxes
            const allCheckboxes = document.querySelectorAll('.checkbox-item input');
            allCheckboxes.forEach(checkbox => {
                checkbox.checked = product.accessories && product.accessories.includes(checkbox.value);
            });
            
            // Populate location and delivery
            document.getElementById('productLocation').value = product.location || '';
            document.getElementById('meetingPlace').value = product.meetingPlace || '';
            document.getElementById('deliveryCost').value = product.deliveryCost || '';
            document.getElementById('negotiable').value = product.negotiable || 'no';
            
            // Populate delivery options
            if (product.deliveryOptions) {
                document.getElementById('pickupOnly').checked = product.deliveryOptions.pickupOnly || false;
                document.getElementById('canDeliver').checked = product.deliveryOptions.canDeliver || false;
                document.getElementById('courier').checked = product.deliveryOptions.courier || false;
            }
            
            // Populate additional fields
            document.getElementById('specialNotes').value = product.specialNotes || '';
            document.getElementById('productTags').value = product.tags ? product.tags.join(', ') : '';
            
            // Set images
            uploadedImages = product.images || [];
            displayImagePreview();
            
            // Update modal title
            document.getElementById('modalTitle').textContent = 'Edit Product';
            document.getElementById('saveProductBtn').innerHTML = '<i class="fas fa-save"></i> Update Product';
            
            showAddProductModal();
        }

        function viewProductDetails(productId) {
            const products = JSON.parse(localStorage.getItem('sellerProducts') || '[]');
            const product = products.find(p => p.id === productId);
            
            if (product) {
                const detailsContent = document.getElementById('productDetailsContent');
                detailsContent.innerHTML = `
                    <div class="product-details">
                        <div class="product-images">
                            ${product.images && product.images.length > 0 ? 
                                product.images.map(img => `<img src="${img}" alt="${product.name}">`).join('') :
                                `<img src="https://picsum.photos/seed/product${product.id}/400/300.jpg" alt="${product.name}">`
                            }
                        </div>
                        <div class="product-info">
                            <h2>${product.name}</h2>
                            <div class="product-meta">
                                <span class="price">KES ${product.price}</span>
                                <span class="condition">${product.condition}</span>
                                <span class="category">${product.category}</span>
                            </div>
                            <div class="product-description">
                                <h3>Description</h3>
                                <p>${product.description}</p>
                            </div>
                            <div class="product-location">
                                <h3>Location</h3>
                                <p><i class="fas fa-map-marker-alt"></i> ${product.location || 'Not specified'}</p>
                            </div>
                            <div class="product-status">
                                <h3>Status</h3>
                                <span class="status-badge status-${product.status || 'pending'}">${(product.status || 'pending').toUpperCase()}</span>
                            </div>
                            <div class="product-actions">
                                <button class="btn btn-primary" onclick="editProduct(${product.id}); closeProductDetailsModal();">
                                    <i class="fas fa-edit"></i> Edit Product
                                </button>
                                <button class="btn btn-secondary" onclick="closeProductDetailsModal()">
                                    Close
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                document.getElementById('productDetailsModal').classList.add('active');
            }
        }

        function closeProductModal() {
            document.getElementById('productModal').classList.remove('active');
            document.getElementById('productForm').reset();
            uploadedImages = [];
            editingProductId = null;
        }

        function closeProductDetailsModal() {
            document.getElementById('productDetailsModal').classList.remove('active');
        }

        // Intelligent Category Assignment System
        function autoAssignCategory(productName, description, manualCategory) {
            // If manual category is provided and valid, use it
            const validCategories = ["Electronics", "Fashion", "Gaming", "Home & Kitchen", "Sports", "Books"];
            if (manualCategory && validCategories.includes(manualCategory)) {
                return manualCategory;
            }

            // Combine all text for analysis
            const textToAnalyze = `${productName} ${description} ${manualCategory || ''}`.toLowerCase();
            
            // Electronics keywords
            const electronicsKeywords = [
                'phone', 'smartphone', 'iphone', 'samsung', 'laptop', 'computer', 'tablet', 'ipad',
                'headphone', 'speaker', 'camera', 'tv', 'television', 'monitor', 'keyboard', 'mouse',
                'charger', 'cable', 'usb', 'bluetooth', 'wifi', 'router', 'modem', 'printer',
                'scanner', 'hard drive', 'ssd', 'memory', 'ram', 'processor', 'gpu', 'graphics',
                'gaming console', 'playstation', 'xbox', 'nintendo', 'watch', 'smartwatch',
                'fitbit', 'apple watch', 'airpods', 'earbuds', 'microphone', 'webcam',
                'drone', 'gadget', 'electronic', 'digital', 'battery', 'power bank'
            ];

            // Fashion keywords
            const fashionKeywords = [
                'shirt', 't-shirt', 'dress', 'pants', 'jeans', 'trousers', 'skirt', 'shorts',
                'jacket', 'coat', 'blazer', 'suit', 'tie', 'belt', 'shoes', 'boots', 'sandals',
                'sneakers', 'heels', 'flip flops', 'bag', 'handbag', 'purse', 'wallet',
                'hat', 'cap', 'scarf', 'gloves', 'sunglasses', 'watch', 'jewelry', 'ring',
                'necklace', 'bracelet', 'earrings', 'perfume', 'cosmetics', 'makeup',
                'lipstick', 'foundation', 'mascara', 'clothing', 'apparel', 'outfit',
                'fashion', 'style', 'wear', 'fabric', 'cotton', 'silk', 'leather', 'denim'
            ];

            // Gaming keywords
            const gamingKeywords = [
                'game', 'gaming', 'playstation', 'ps4', 'ps5', 'xbox', 'nintendo', 'switch',
                'console', 'controller', 'joystick', 'gaming chair', 'desk', 'monitor',
                'headset', 'gaming mouse', 'gaming keyboard', 'rgb', 'led', 'gaming pc',
                'graphics card', 'gpu', 'gaming laptop', 'steam', 'epic games', 'game pass',
                'gaming headset', 'gaming mouse pad', 'gaming desk', 'gaming chair',
                'video game', 'pc game', 'board game', 'card game', 'gaming accessories'
            ];

            // Home & Kitchen keywords
            const homeKeywords = [
                'furniture', 'sofa', 'chair', 'table', 'bed', 'mattress', 'couch', 'wardrobe',
                'shelf', 'cabinet', 'desk', 'kitchen', 'cookware', 'pan', 'pot', 'utensil',
                'knife', 'cutting board', 'blender', 'mixer', 'oven', 'microwave', 'refrigerator',
                'dishwasher', 'coffee maker', 'toaster', 'kettle', 'appliance', 'vacuum',
                'cleaner', 'mop', 'broom', 'decor', 'curtain', 'rug', 'carpet', 'lamp',
                'lighting', 'mirror', 'picture frame', 'vase', 'plant', 'home', 'house',
                'living room', 'bedroom', 'bathroom', 'kitchenware', 'dinnerware', 'plates'
            ];

            // Sports keywords
            const sportsKeywords = [
                'sport', 'fitness', 'gym', 'workout', 'exercise', 'weights', 'dumbbell', 'barbell',
                'treadmill', 'bike', 'bicycle', 'elliptical', 'yoga', 'mat', 'ball', 'basketball',
                'football', 'soccer', 'tennis', 'racket', 'golf', 'clubs', 'running', 'shoes',
                'athletic', 'jersey', 'helmet', 'protective gear', 'skateboard', 'surfboard',
                'ski', 'snowboard', 'camping', 'hiking', 'tent', 'sleeping bag', 'backpack',
                'fishing', 'rod', 'reel', 'hunting', 'outdoor', 'adventure', 'sports equipment'
            ];

            // Books keywords
            const booksKeywords = [
                'book', 'novel', 'textbook', 'magazine', 'comic', 'manga', 'ebook', 'kindle',
                'author', 'fiction', 'non-fiction', 'biography', 'history', 'science', 'math',
                'education', 'study', 'guide', 'manual', 'cookbook', 'recipe', 'art', 'photography',
                'music', 'sheet music', 'dictionary', 'encyclopedia', 'children', 'kids',
                'educational', 'learning', 'school', 'college', 'university', 'paperback', 'hardcover'
            ];

            // Score each category based on keyword matches
            const scores = {
                'Electronics': 0,
                'Fashion': 0,
                'Gaming': 0,
                'Home & Kitchen': 0,
                'Sports': 0,
                'Books': 0
            };

            // Count keyword matches
            electronicsKeywords.forEach(keyword => {
                if (textToAnalyze.includes(keyword)) scores.Electronics++;
            });

            fashionKeywords.forEach(keyword => {
                if (textToAnalyze.includes(keyword)) scores.Fashion++;
            });

            gamingKeywords.forEach(keyword => {
                if (textToAnalyze.includes(keyword)) scores.Gaming++;
            });

            homeKeywords.forEach(keyword => {
                if (textToAnalyze.includes(keyword)) scores['Home & Kitchen']++;
            });

            sportsKeywords.forEach(keyword => {
                if (textToAnalyze.includes(keyword)) scores.Sports++;
            });

            booksKeywords.forEach(keyword => {
                if (textToAnalyze.includes(keyword)) scores.Books++;
            });

            // Find the category with the highest score
            let maxScore = 0;
            let assignedCategory = 'Electronics'; // Default category

            for (const [category, score] of Object.entries(scores)) {
                if (score > maxScore) {
                    maxScore = score;
                    assignedCategory = category;
                }
            }

            // If no keywords match, use manual category or default
            if (maxScore === 0) {
                assignedCategory = manualCategory && validCategories.includes(manualCategory) 
                    ? manualCategory 
                    : 'Electronics';
            }

            console.log(` Auto-assigned category: ${assignedCategory} (Score: ${maxScore})`);
            console.log(` Analyzed text: "${textToAnalyze.substring(0, 100)}..."`);
            
            return assignedCategory;
        }

        function saveProduct(event) {
            event.preventDefault();
            
            // Collect accessories
            const accessories = [];
            document.querySelectorAll('.checkbox-item input:checked').forEach(checkbox => {
                accessories.push(checkbox.value);
            });
            
            const productData = {
                id: editingProductId || Date.now(),
                sellerId: currentUser.id,
                sellerName: currentUser.name,
                sellerEmail: currentUser.email,
                name: document.getElementById('productName').value,
                category: autoAssignCategory(document.getElementById('productName').value, document.getElementById('productDescription').value, document.getElementById('productCategory').value),
                price: parseFloat(document.getElementById('productPrice').value),
                originalPrice: parseFloat(document.getElementById('originalPrice').value) || null,
                condition: document.getElementById('productCondition').value,
                itemAge: document.getElementById('itemAge').value,
                conditionDetails: document.getElementById('conditionDetails').value,
                sellReason: document.getElementById('sellReason').value,
                otherReason: document.getElementById('sellReason').value === 'other' ? document.getElementById('otherReason').value : null,
                description: document.getElementById('productDescription').value,
                brand: document.getElementById('productBrand').value,
                model: document.getElementById('productModel').value,
                color: document.getElementById('productColor').value,
                size: document.getElementById('productSize').value,
                usageFrequency: document.getElementById('usageFrequency').value,
                originalOwner: document.getElementById('originalOwner').value,
                accessories: accessories,
                location: document.getElementById('productLocation').value,
                meetingPlace: document.getElementById('meetingPlace').value,
                deliveryOptions: {
                    pickupOnly: document.getElementById('pickupOnly').checked,
                    canDeliver: document.getElementById('canDeliver').checked,
                    courier: document.getElementById('courier').checked
                },
                deliveryCost: parseFloat(document.getElementById('deliveryCost').value) || 0,
                negotiable: document.getElementById('negotiable').value,
                specialNotes: document.getElementById('specialNotes').value,
                tags: document.getElementById('productTags').value.split(',').map(tag => tag.trim()).filter(tag => tag),
                images: uploadedImages,
                status: 'pending',
                createdAt: editingProductId ? getProduct(editingProductId).createdAt : new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            let products = JSON.parse(localStorage.getItem('sellerProducts') || '[]');
            
            if (editingProductId) {
                // Update existing product
                const index = products.findIndex(p => p.id === editingProductId);
                if (index !== -1) {
                    products[index] = productData;
                    showToast('Product updated successfully! It will be reviewed by admin.', 'success');
                }
            } else {
                // Add new product
                products.push(productData);
                showToast('Product submitted for approval! Admin will review it shortly.', 'success');
            }
            
            localStorage.setItem('sellerProducts', JSON.stringify(products));
            
            // Only add to main products if approved by admin
            addToMainProducts(productData);
            
            closeProductModal();
            loadDashboardData();
        }

        function addToMainProducts(productData) {
            // Only add to main products if approved by admin
            if (productData.status === 'approved') {
                let mainProducts = JSON.parse(localStorage.getItem('products') || '[]');
                
                if (editingProductId) {
                    // Update existing product in main list
                    const index = mainProducts.findIndex(p => p.id === editingProductId);
                    if (index !== -1) {
                        mainProducts[index] = productData;
                    }
                } else {
                    // Add new product to main list
                    mainProducts.push(productData);
                }
                
                localStorage.setItem('products', JSON.stringify(mainProducts));
            }
            // If not approved, product remains in sellerProducts only
        }

        function getProduct(productId) {
            const products = JSON.parse(localStorage.getItem('sellerProducts') || '[]');
            return products.find(p => p.id === productId);
        }

        function deleteProduct(productId) {
            if (confirm('Are you sure you want to delete this product? This action cannot be undone.')) {
                let products = JSON.parse(localStorage.getItem('sellerProducts') || '[]');
                const productToDelete = products.find(p => p.id === productId);
                
                products = products.filter(p => p.id !== productId);
                localStorage.setItem('sellerProducts', JSON.stringify(products));
                
                // Also remove from main products list if it was approved
                if (productToDelete && productToDelete.status === 'approved') {
                    let mainProducts = JSON.parse(localStorage.getItem('products') || '[]');
                    mainProducts = mainProducts.filter(p => p.id !== productId);
                    localStorage.setItem('products', JSON.stringify(mainProducts));
                }
                
                loadDashboardData();
                showToast('Product deleted successfully', 'success');
            }
        }

        function handleImageUpload(event) {
            const files = Array.from(event.target.files);
            
            files.forEach(file => {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        uploadedImages.push(e.target.result);
                        displayImagePreview();
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        function displayImagePreview() {
            const preview = document.getElementById('imagePreview');
            preview.innerHTML = uploadedImages.map((img, index) => `
                <div class="image-preview-item">
                    <img src="${img}" alt="Product image ${index + 1}">
                    <button type="button" class="remove-image" onclick="removeImage(${index})">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `).join('');
        }

        function removeImage(index) {
            uploadedImages.splice(index, 1);
            displayImagePreview();
        }

        // Show section
        function showSection(section) {
            document.querySelectorAll('.dashboard-section').forEach(sec => {
                sec.style.display = 'none';
                sec.classList.remove('active');
            });
            document.querySelectorAll('.sidebar-link').forEach(link => {
                link.classList.remove('active');
            });
            const sectionElement = document.getElementById(`${section}-section`);
            if (sectionElement) {
                sectionElement.style.display = 'block';
                setTimeout(() => sectionElement.classList.add('active'), 10);
            }
            event.target.classList.add('active');
            switch(section) {
                case 'overview': loadOverviewData(); break;
                case 'products': loadProductsData(); break;
                case 'orders': loadOrdersData(); break;
                case 'analytics': loadAnalyticsData(); break;
                case 'settings': loadSettingsData(); break;
                    break;
                case 'analytics':
                    loadAnalyticsData();
                    break;
                case 'settings':
                    loadSettingsData();
                    break;
            }
        }

        // Load Overview Data
        function loadOverviewData() {
            const products = JSON.parse(localStorage.getItem('sellerProducts') || '[]');
            const sellerProducts = products.filter(p => p.sellerId === currentUser.id);
            const orders = JSON.parse(localStorage.getItem('sellerOrders') || '[]');
            const sellerOrders = orders.filter(o => o.sellerId === currentUser.id);
            
            // Update stats
            document.getElementById('totalProducts').textContent = sellerProducts.length;
            document.getElementById('totalOrders').textContent = sellerOrders.length;
            
            // Calculate revenue
            const revenue = sellerOrders
                .filter(o => o.status === 'delivered')
                .reduce((sum, order) => sum + (order.total || 0), 0);
            document.getElementById('totalRevenue').textContent = `KES ${revenue.toLocaleString()}`;
            
            // Calculate views (placeholder)
            const views = sellerProducts.reduce((sum, product) => sum + (product.views || 0), 0);
            document.getElementById('totalViews').textContent = views.toLocaleString();
        }

        // Load Products Data
        function loadProductsData() {
            const products = JSON.parse(localStorage.getItem('sellerProducts') || '[]');
            const sellerProducts = products.filter(p => p.sellerId === currentUser.id);
            
            // Show approval notice if there are pending products
            const pendingProducts = sellerProducts.filter(p => p.status === 'pending');
            const approvalNotice = document.getElementById('approvalNotice');
            if (approvalNotice) {
                approvalNotice.style.display = pendingProducts.length > 0 ? 'block' : 'none';
            }
            
            loadProducts(sellerProducts);
        }

        // Load Orders Data
        function loadOrdersData() {
            const orders = JSON.parse(localStorage.getItem('sellerOrders') || '[]');
            const sellerOrders = orders.filter(o => o.sellerId === currentUser.id);
            
            const ordersList = document.getElementById('ordersList');
            const emptyState = document.getElementById('ordersEmptyState');
            
            if (sellerOrders.length === 0) {
                ordersList.style.display = 'none';
                emptyState.style.display = 'block';
            } else {
                ordersList.style.display = 'grid';
                emptyState.style.display = 'none';
                
                ordersList.innerHTML = sellerOrders.map(order => `
                    <div class="order-card">
                        <div class="order-header">
                            <span class="order-id">#${order.id}</span>
                            <span class="order-status ${order.status}">${order.status.toUpperCase()}</span>
                        </div>
                        <div class="order-details">
                            <div class="order-customer">
                                <strong>Customer:</strong> ${order.customerName}<br>
                                <strong>Email:</strong> ${order.customerEmail}<br>
                                <strong>Phone:</strong> ${order.customerPhone}
                            </div>
                            <div class="order-items">
                                <strong>Items:</strong> ${order.items.length}<br>
                                <strong>Total:</strong> KES ${order.total}<br>
                                <strong>Date:</strong> ${new Date(order.createdAt).toLocaleDateString()}
                            </div>
                        </div>
                        <div class="order-actions">
                            ${order.status === 'pending' ? `
                                <button class="btn btn-primary" onclick="updateOrderStatus(${order.id}, 'processing')">
                                    <i class="fas fa-check"></i> Accept Order
                                </button>
                                <button class="btn btn-secondary" onclick="updateOrderStatus(${order.id}, 'cancelled')">
                                    <i class="fas fa-times"></i> Cancel
                                </button>
                            ` : ''}
                            ${order.status === 'processing' ? `
                                <button class="btn btn-primary" onclick="updateOrderStatus(${order.id}, 'shipped')">
                                    <i class="fas fa-truck"></i> Mark as Shipped
                                </button>
                            ` : ''}
                            ${order.status === 'shipped' ? `
                                <button class="btn btn-primary" onclick="updateOrderStatus(${order.id}, 'delivered')">
                                    <i class="fas fa-check-circle"></i> Mark as Delivered
                                </button>
                            ` : ''}
                            <button class="btn btn-secondary" onclick="viewOrderDetails(${order.id})">
                                <i class="fas fa-eye"></i> View Details
                            </button>
                        </div>
                    </div>
                `).join('');
            }
        }

        // Load Analytics Data
        function loadAnalyticsData() {
            const products = JSON.parse(localStorage.getItem('sellerProducts') || '[]');
            const sellerProducts = products.filter(p => p.sellerId === currentUser.id);
            const orders = JSON.parse(localStorage.getItem('sellerOrders') || '[]');
            const sellerOrders = orders.filter(o => o.sellerId === currentUser.id);
            
            // Load top products
            const topProductsList = document.querySelector('.top-products-list');
            const productSales = {};
            
            sellerOrders.forEach(order => {
                order.items.forEach(item => {
                    productSales[item.name] = (productSales[item.name] || 0) + item.quantity;
                });
            });
            
            const topProducts = Object.entries(productSales)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 5);
            
            if (topProducts.length > 0) {
                topProductsList.innerHTML = topProducts.map(([name, sales]) => `
                    <div class="top-product-item">
                        <span class="top-product-name">${name}</span>
                        <span class="top-product-sales">${sales} sold</span>
                    </div>
                `).join('');
            } else {
                topProductsList.innerHTML = '<p style="text-align: center; color: var(--text-muted);">No sales data available</p>';
            }
        }

        // Load Settings Data
        function loadSettingsData() {
            // Load seller profile data
            const businessNameInput = document.getElementById('businessName');
            const sellerEmailInput = document.getElementById('sellerEmail');
            const sellerPhoneInput = document.getElementById('sellerPhone');
            
            if (businessNameInput) businessNameInput.value = currentUser.business || '';
            if (sellerEmailInput) sellerEmailInput.value = currentUser.email;
            if (sellerPhoneInput) sellerPhoneInput.value = currentUser.phone || '';
        }

        // Filter Products
        function filterProducts() {
            const filter = document.getElementById('productFilter').value;
            const products = JSON.parse(localStorage.getItem('sellerProducts') || '[]');
            const sellerProducts = products.filter(p => p.sellerId === currentUser.id);
            
            let filteredProducts = sellerProducts;
            if (filter !== 'all') {
                filteredProducts = sellerProducts.filter(p => (p.status || 'pending') === filter);
            }
            
            loadProducts(filteredProducts);
        }

        // Search Products
        function searchProducts() {
            const searchTerm = document.getElementById('productSearch').value.toLowerCase();
            const products = JSON.parse(localStorage.getItem('sellerProducts') || '[]');
            const sellerProducts = products.filter(p => p.sellerId === currentUser.id);
            
            const filteredProducts = sellerProducts.filter(p => 
                p.name.toLowerCase().includes(searchTerm) ||
                p.description.toLowerCase().includes(searchTerm) ||
                p.category.toLowerCase().includes(searchTerm)
            );
            
            loadProducts(filteredProducts);
        }

        // Filter Orders
        function filterOrders() {
            const filter = document.getElementById('orderFilter').value;
            const orders = JSON.parse(localStorage.getItem('sellerOrders') || '[]');
            const sellerOrders = orders.filter(o => o.sellerId === currentUser.id);
            
            let filteredOrders = sellerOrders;
            if (filter !== 'all') {
                filteredOrders = sellerOrders.filter(o => o.status === filter);
            }
            
            // Reload orders with filtered data
            const ordersList = document.getElementById('ordersList');
            const emptyState = document.getElementById('ordersEmptyState');
            
            if (filteredOrders.length === 0) {
                ordersList.style.display = 'none';
                emptyState.style.display = 'block';
            } else {
                ordersList.style.display = 'grid';
                emptyState.style.display = 'none';
                // Reuse the same HTML generation logic from loadOrdersData
                ordersList.innerHTML = filteredOrders.map(order => `
                    <div class="order-card">
                        <div class="order-header">
                            <span class="order-id">#${order.id}</span>
                            <span class="order-status ${order.status}">${order.status.toUpperCase()}</span>
                        </div>
                        <div class="order-details">
                            <div class="order-customer">
                                <strong>Customer:</strong> ${order.customerName}<br>
                                <strong>Email:</strong> ${order.customerEmail}<br>
                                <strong>Phone:</strong> ${order.customerPhone}
                            </div>
                            <div class="order-items">
                                <strong>Items:</strong> ${order.items.length}<br>
                                <strong>Total:</strong> KES ${order.total}<br>
                                <strong>Date:</strong> ${new Date(order.createdAt).toLocaleDateString()}
                            </div>
                        </div>
                        <div class="order-actions">
                            ${order.status === 'pending' ? `
                                <button class="btn btn-primary" onclick="updateOrderStatus(${order.id}, 'processing')">
                                    <i class="fas fa-check"></i> Accept Order
                                </button>
                                <button class="btn btn-secondary" onclick="updateOrderStatus(${order.id}, 'cancelled')">
                                    <i class="fas fa-times"></i> Cancel
                                </button>
                            ` : ''}
                            ${order.status === 'processing' ? `
                                <button class="btn btn-primary" onclick="updateOrderStatus(${order.id}, 'shipped')">
                                    <i class="fas fa-truck"></i> Mark as Shipped
                                </button>
                            ` : ''}
                            ${order.status === 'shipped' ? `
                                <button class="btn btn-primary" onclick="updateOrderStatus(${order.id}, 'delivered')">
                                    <i class="fas fa-check-circle"></i> Mark as Delivered
                                </button>
                            ` : ''}
                            <button class="btn btn-secondary" onclick="viewOrderDetails(${order.id})">
                                <i class="fas fa-eye"></i> View Details
                            </button>
                        </div>
                    </div>
                `).join('');
            }
        }

        // Update Order Status
        function updateOrderStatus(orderId, newStatus) {
            const orders = JSON.parse(localStorage.getItem('sellerOrders') || '[]');
            const orderIndex = orders.findIndex(o => o.id === orderId);
            
            if (orderIndex !== -1) {
                orders[orderIndex].status = newStatus;
                orders[orderIndex].updatedAt = new Date().toISOString();
                
                localStorage.setItem('sellerOrders', JSON.stringify(orders));
                
                // Also update in main orders list
                const mainOrders = JSON.parse(localStorage.getItem('orders') || '[]');
                const mainOrderIndex = mainOrders.findIndex(o => o.id === orderId);
                if (mainOrderIndex !== -1) {
                    mainOrders[mainOrderIndex].status = newStatus;
                    mainOrders[mainOrderIndex].updatedAt = new Date().toISOString();
                    localStorage.setItem('orders', JSON.stringify(mainOrders));
                }
                
                showToast(`Order status updated to ${newStatus}`, 'success');
                loadOrdersData();
                loadOverviewData();
            }
        }

        // View Order Details
        function viewOrderDetails(orderId) {
            const orders = JSON.parse(localStorage.getItem('sellerOrders') || '[]');
            const order = orders.find(o => o.id === orderId);
            
            if (order) {
                showToast(`Order details for #${orderId} will be displayed`, 'info');
                // You can implement a modal for detailed order view here
            }
        }

        // Update Analytics
        function updateAnalytics() {
            const dateRange = document.getElementById('dateRange').value;
            showToast(`Analytics updated for ${dateRange}`, 'info');
            loadAnalyticsData();
        }

        // Save Settings
        function saveSettings(event) {
            event.preventDefault();
            
            // Update seller profile
            const businessName = document.getElementById('businessName').value;
            const phone = document.getElementById('sellerPhone').value;
            
            const sellers = JSON.parse(localStorage.getItem('registeredSellers') || '[]');
            const sellerIndex = sellers.findIndex(s => s.id === currentUser.id);
            
            if (sellerIndex !== -1) {
                sellers[sellerIndex].business = businessName;
                sellers[sellerIndex].phone = phone;
                
                localStorage.setItem('registeredSellers', JSON.stringify(sellers));
                localStorage.setItem('sellerData', JSON.stringify(sellers[sellerIndex]));
                
                currentUser = sellers[sellerIndex];
                showToast('Settings saved successfully!', 'success');
            }
        }

        // Visit Marketplace
        function goToHome() {
            // Navigate to main shop homepage
            window.location.href = '../index.html';
            showToast('Going to main shop...', 'success');
        }

        function visitMarketplace() {
            // Navigate to marketplace in the same tab
            window.location.href = '../index.html';
            showToast('Redirecting to marketplace...', 'info');
        }

        function openMessages() {
            // Open messages in the same tab
            window.location.href = '../messages-new.html';
            showToast('Opening messages...', 'info');
        }

        function updateMessageCount() {
            if (!currentUser) return;
            
            const conversations = JSON.parse(localStorage.getItem('conversations') || '[]');
            const sellerConversations = conversations.filter(c => {
                // Check if seller is in participants (new format)
                if (c.participants && Array.isArray(c.participants)) {
                    return c.participants.some(p => p.email === currentUser.email);
                }
                // Check if seller is in participants string (old format)
                if (c.participants && typeof c.participants === 'string') {
                    return c.participants.includes(currentUser.email);
                }
                // Check if seller field exists (old format)
                if (c.seller === currentUser.email) {
                    return true;
                }
                return false;
            });
            
            // Count unread messages - check both unread and unreadCount fields
            let unreadCount = 0;
            sellerConversations.forEach(c => {
                if (c.unreadCount > 0) {
                    unreadCount += c.unreadCount;
                } else if (c.unread) {
                    unreadCount += 1;
                }
            });
            
            const messageBadge = document.getElementById('messageBadge');
            
            if (messageBadge) {
                messageBadge.textContent = unreadCount;
                messageBadge.style.display = unreadCount > 0 ? 'flex' : 'none';
            }
        }

        function logout() {
            localStorage.removeItem('sellerData');
            localStorage.removeItem('currentUser');
            currentUser = null;
            showLoginScreen();
            showToast('Logged out successfully', 'success');
        }

        function showSellerRegistration() {
            window.location.href = '../index.html';
        }

        function showToast(message, type = 'success', customIcon = null) {
            // Remove existing toast if any
            const existingToast = document.querySelector('.toast');
            if (existingToast) {
                existingToast.remove();
            }

            // Create new toast element with enhanced styling
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            // Add professional icon based on type
            let icon = '';
            if (customIcon) {
                icon = `<i class="${customIcon}"></i>`;
            } else {
                switch(type) {
                    case 'success':
                        icon = '<i class="fas fa-check-circle"></i>';
                        break;
                    case 'error':
                        icon = '<i class="fas fa-times-circle"></i>';
                        break;
                    case 'warning':
                        icon = '<i class="fas fa-exclamation-triangle"></i>';
                        break;
                    case 'info':
                        icon = '<i class="fas fa-info-circle"></i>';
                        break;
                    default:
                        icon = '<i class="fas fa-bell"></i>';
                }
            }
            
            // Enhanced HTML with better structure
            toast.innerHTML = `
                <div class="toast-content">
                    <span class="toast-icon">${icon}</span>
                    <span class="toast-message">${message}</span>
                </div>
            `;
            
            // Add to body
            document.body.appendChild(toast);
            
            // Trigger entrance animation
            setTimeout(() => {
                toast.classList.add('show');
            }, 10);
            
            // Auto hide after 0.7 seconds (700ms) for all notifications
            setTimeout(() => {
                toast.classList.remove('show');
                toast.classList.add('hide');
                
                // Remove from DOM after exit animation
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, 700);
        }

        // Notification System
        function updateNotificationBadge() {
            const notifications = JSON.parse(localStorage.getItem('sellerNotifications') || '[]');
            const unreadCount = notifications.filter(n => n.sellerId === currentUser.id && !n.read).length;
            const badge = document.getElementById('notificationBadge');
            
            if (unreadCount > 0) {
                badge.textContent = unreadCount;
                badge.classList.remove('hidden');
            } else {
                badge.classList.add('hidden');
            }
        }

        function toggleNotificationDropdown() {
            const dropdown = document.getElementById('notificationDropdown');
            const menu = document.getElementById('notificationMenu');
            const isActive = menu.classList.contains('active');
            
            // Close all dropdowns
            document.querySelectorAll('.notification-menu').forEach(m => {
                m.classList.remove('active');
            });
            
            if (!isActive) {
                menu.classList.add('active');
                loadDropdownNotifications();
            }
        }

        function loadDropdownNotifications() {
            const notifications = JSON.parse(localStorage.getItem('sellerNotifications') || '[]');
            const sellerNotifications = notifications.filter(n => n.sellerId === currentUser.id);
            const notificationList = document.getElementById('notificationMenuList');
            
            if (sellerNotifications.length === 0) {
                notificationList.innerHTML = `
                    <div class="empty-notifications-menu">
                        <i class="fas fa-bell-slash"></i>
                        <h3>No notifications</h3>
                        <p>You'll see updates about your products here</p>
                    </div>
                `;
                return;
            }
            
            // Sort by newest first and limit to 5 for dropdown
            const sortedNotifications = sellerNotifications
                .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
                .slice(0, 5);
            
            notificationList.innerHTML = sortedNotifications.map(notification => `
                <div class="notification-menu-item ${!notification.read ? 'unread' : ''}" onclick="handleNotificationClick(${notification.id})">
                    <div class="notification-menu-content">
                        <div class="notification-menu-icon ${notification.action}">
                            <i class="fas fa-${notification.action === 'approved' ? 'check' : 'times'}"></i>
                        </div>
                        <div class="notification-menu-details">
                            <div class="notification-menu-message">
                                ${notification.action === 'approved' 
                                    ? `Your product <strong>${notification.productName}</strong> has been approved!`
                                    : `Your product <strong>${notification.productName}</strong> has been rejected.`
                                }
                            </div>
                            ${notification.reason ? `<div class="notification-menu-reason">Reason: ${notification.reason}</div>` : ''}
                            <div class="notification-menu-time">${formatNotificationTime(notification.createdAt)}</div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function handleNotificationClick(notificationId) {
            // Mark as read
            const notifications = JSON.parse(localStorage.getItem('sellerNotifications') || '[]');
            const notification = notifications.find(n => n.id === notificationId);
            if (notification) {
                notification.read = true;
                localStorage.setItem('sellerNotifications', JSON.stringify(notifications));
                updateNotificationBadge();
                loadDropdownNotifications();
            }
        }

        function showAllNotifications() {
            const dropdown = document.getElementById('notificationDropdown');
            const menu = document.getElementById('notificationMenu');
            menu.classList.remove('active');
            
            // Show the full modal for detailed view
            const modal = document.getElementById('notificationsModal');
            modal.classList.add('active');
            loadNotifications();
        }

        function closeNotifications() {
            const modal = document.getElementById('notificationsModal');
            modal.classList.remove('active');
            markAllNotificationsAsRead();
        }

        function loadNotifications() {
            const notifications = JSON.parse(localStorage.getItem('sellerNotifications') || '[]');
            const sellerNotifications = notifications.filter(n => n.sellerId === currentUser.id);
            const notificationsList = document.getElementById('notificationsList');
            
            if (sellerNotifications.length === 0) {
                notificationsList.innerHTML = `
                    <div class="empty-notifications">
                        <i class="fas fa-bell-slash"></i>
                        <h3>No notifications</h3>
                        <p>You'll see updates about your products here</p>
                    </div>
                `;
                return;
            }
            
            // Sort by newest first
            sellerNotifications.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            
            notificationsList.innerHTML = sellerNotifications.map(notification => `
                <div class="notification-item ${!notification.read ? 'unread' : ''}">
                    <div class="notification-content">
                        <div class="notification-icon-item ${notification.action}">
                            <i class="fas fa-${notification.action === 'approved' ? 'check' : 'times'}"></i>
                        </div>
                        <div class="notification-details">
                            <div class="notification-message">
                                ${notification.action === 'approved' 
                                    ? `Your product <strong>${notification.productName}</strong> has been approved and is now live on the marketplace!`
                                    : `Your product <strong>${notification.productName}</strong> has been rejected.`
                                }
                            </div>
                            ${notification.reason ? `<div class="notification-reason">Reason: ${notification.reason}</div>` : ''}
                            <div class="notification-time">${formatNotificationTime(notification.createdAt)}</div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function markAllNotificationsAsRead() {
            const notifications = JSON.parse(localStorage.getItem('sellerNotifications') || '[]');
            notifications.forEach(notification => {
                if (notification.sellerId === currentUser.id) {
                    notification.read = true;
                }
            });
            localStorage.setItem('sellerNotifications', JSON.stringify(notifications));
            updateNotificationBadge();
            loadDropdownNotifications();
        }

        function formatNotificationTime(timestamp) {
            const date = new Date(timestamp);
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            if (diffMins < 1) return 'Just now';
            if (diffMins < 60) return `${diffMins} minute${diffMins > 1 ? 's' : ''} ago`;
            if (diffHours < 24) return `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`;
            if (diffDays < 7) return `${diffDays} day${diffDays > 1 ? 's' : ''} ago`;
            
            return date.toLocaleDateString();
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            const dropdown = document.getElementById('notificationDropdown');
            if (dropdown && !dropdown.contains(e.target)) {
                const menu = document.getElementById('notificationMenu');
                if (menu) {
                    menu.classList.remove('active');
                }
            }
        });
        
        // Update message count every 5 seconds
        setInterval(() => {
            if (currentUser) {
                updateMessageCount();
            }
        }, 5000);
        
        // Listen for new message notifications from messages page
        window.addEventListener('storage', function(e) {
            if (e.key === 'sellerNotification' && e.newValue) {
                const notification = JSON.parse(e.newValue);
                if (notification.type === 'newMessage') {
                    updateMessageCount();
                    showToast('New message received!', 'info');
                }
            }
        });

        // Seller Guide Functions
        function toggleSellerGuide() {
            const modal = document.getElementById('sellerGuideModal');
            if (modal.style.display === 'none' || modal.style.display === '') {
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
                showToast(' Seller guide opened! Learn how to succeed on EcoLoop Kenya', 'success');
            } else {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
                showToast('Seller guide closed', 'info');
            }
        }

        function showGuideTab(tabName) {
            // Hide all tab contents
            const allTabs = document.querySelectorAll('.guide-tab-content');
            allTabs.forEach(tab => {
                tab.classList.remove('active');
                tab.style.display = 'none';
            });

            // Remove active class from all tab buttons
            const allTabButtons = document.querySelectorAll('.guide-tab');
            allTabButtons.forEach(button => {
                button.classList.remove('active');
            });

            // Show selected tab content
            const selectedTab = document.getElementById(tabName);
            if (selectedTab) {
                selectedTab.classList.add('active');
                selectedTab.style.display = 'block';
            }

            // Add active class to clicked tab button
            if (event && event.target) {
                event.target.classList.add('active');
            }

            // Show toast for tab change
            const tabTitles = {
                'getting-started': 'Getting Started',
                'listing-products': 'Listing Products',
                'managing-orders': 'Managing Orders',
                'payments': 'Payments & Earnings',
                'tips': 'Success Tips'
            };
            
            const title = tabTitles[tabName] || 'Guide';
            showToast(` ${title} section opened`, 'info');
        }

        function startSelling() {
            showToast(' Redirecting to dashboard to start selling...', 'success');
            
            // Close the modal
            const modal = document.getElementById('sellerGuideModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            
            // If user is logged in, show products section
            if (currentUser) {
                showSection('products');
                // Scroll to products section
                setTimeout(() => {
                    const productsSection = document.querySelector('.products-section');
                    if (productsSection) {
                        productsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }, 500);
            } else {
                // If not logged in, show login
                showToast('Please login first to start selling', 'info');
            }
        }

        function downloadSellerGuide() {
            // Create a simple text version of the seller guide
            const guideContent = `
ECOLOOP KENYA - SELLER SUCCESS GUIDE
====================================

GETTING STARTED
===============
1. Register Your Account
    Complete the registration form with business details
    Provide business name, description, contact information
    Include business location and valid email address

2. Complete Your Profile
    Add profile picture and logo
    Write detailed business description
    Set operating hours
    Define return policy

3. Start Listing Products
    Add high-quality photos
    Write detailed descriptions
    Set competitive prices
    Wait for admin approval

LISTING PRODUCTS
===============
1. Product Photography
    Use clear, well-lit photos
    Show multiple angles
    Include size reference
    Highlight any defects honestly

2. Write Compelling Descriptions
    Include brand, model, and specifications
    Describe condition honestly
    Mention original price and purchase date
    Include warranty information

3. Set Competitive Prices
    Research similar products
    Consider product condition
    Factor in shipping costs
    Include EcoLoop Kenya fees (5%)

MANAGING ORDERS
===============
1. Order Notifications
    Instant email notifications
    Dashboard alerts
    Buyer contact information
    Order details and shipping address

2. Processing Orders
    Acknowledge within 24 hours
    Confirm product availability
    Package items securely
    Update order status

3. Customer Communication
    Respond to messages promptly
    Provide order updates
    Handle questions professionally
    Resolve issues quickly

PAYMENTS & EARNINGS
==================
1. Payment Methods
    M-Pesa (most popular)
    Bank transfers
    Credit/Debit cards
    Cash on delivery (optional)

2. Fee Structure
    5% commission on sales
    No listing fees
    No monthly subscription
    Payment processing fees apply

3. Payout Schedule
    3-day holding period
    Weekly payouts (Mondays)
    Direct bank transfers
    Detailed earnings reports

SUCCESS TIPS & BEST PRACTICES
===========================
 Build Your Reputation - Maintain 5-star ratings
 Professional Photos - Invest time in photography
 Fast Response - Respond within 2 hours
 Competitive Pricing - Research market prices
 Quick Shipping - Ship within 24 hours
 Track Performance - Use dashboard analytics

CONTACT SUPPORT
==============
For support, email: support@ecoloopkenya.com

Generated on: ${new Date().toLocaleDateString()}
`;

            // Create a blob with the content
            const blob = new Blob([guideContent], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            
            // Create a temporary link and trigger download
            const a = document.createElement('a');
            a.href = url;
            a.download = 'EcoLoop-Kenya-Seller-Guide.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            showToast(' Seller guide downloaded successfully!', 'success');
        }

        // Close modal when clicking outside
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('sellerGuideModal');
            if (event.target === modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
                showToast('Seller guide closed', 'info');
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                const modal = document.getElementById('sellerGuideModal');
                if (modal.style.display === 'block') {
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                    showToast('Seller guide closed', 'info');
                }
            }
        });
    </script>
    
    <!-- MongoDB Integration Script -->
    <script src="../mongodb-integration.js"></script>
</body>
</html>
