/* ========================================
   ULTRA-COMPACT MOBILE VIEWPORT OPTIMIZATION
   ========================================
   Ensures everything fits on first screen without scrolling
   ======================================== */

@media (max-width: 768px) {
    
    /* ========================================
       FORCE COMPACT VIEWPORT FIT
       ======================================== */
    html, body {
        height: 100vh !important;
        overflow-x: hidden !important;
        overflow-y: auto !important;
        max-height: 100vh !important;
    }
    
    /* ========================================
       ULTRA-COMPACT MAIN CONTAINER
       ======================================== */
    .mobile-container {
        height: calc(100vh - var(--compact-header-height)) !important;
        overflow-y: auto !important;
        overflow-x: hidden !important;
        padding: 0 !important;
        margin: 0 !important;
    }
    
    /* ========================================
       COLLAPSE ALL SECTIONS TO MINIMUM
       ======================================== */
    .section, .mobile-section {
        padding: 2px !important;
        margin: 1px 0 !important;
        min-height: auto !important;
    }
    
    /* ========================================
       GRID LAYOUT OPTIMIZATION FOR FIRST SCREEN
       ======================================== */
    .mobile-first-screen-layout {
        display: grid !important;
        grid-template-rows: 
            var(--compact-header-height)    /* Header: 60px */
            80px                            /* Welcome: 80px */
            60px                            /* Seller Dashboard: 60px */
            80px                            /* Categories: 80px */
            100px                           /* Products: 100px */
            70px                            /* NyumbaSure: 70px */
            60px                            /* Footer: 60px */
        !important;
        height: 100vh !important;
        overflow: hidden !important;
    }
    
    /* ========================================
       HORIZONTAL COMPACT LAYOUT FOR CATEGORIES
       ======================================== */
    .mobile-categories-grid {
        display: flex !important;
        flex-wrap: nowrap !important;
        gap: 2px !important;
        overflow-x: auto !important;
        overflow-y: hidden !important;
        padding: 2px !important;
    }
    
    .mobile-category-card {
        flex: 0 0 auto !important;
        min-width: 50px !important;
        height: 40px !important;
        padding: 2px !important;
        margin: 0 !important;
    }
    
    /* ========================================
       HORIZONTAL PRODUCT SCROLL
       ======================================== */
    .mobile-products-grid {
        display: flex !important;
        flex-wrap: nowrap !important;
        gap: 2px !important;
        overflow-x: auto !important;
        overflow-y: hidden !important;
        padding: 2px !important;
    }
    
    .mobile-product-card {
        flex: 0 0 auto !important;
        min-width: 80px !important;
        height: 90px !important;
        padding: 2px !important;
        margin: 0 !important;
    }
    
    /* ========================================
       COMPACT SELLER STATS HORIZONTAL
       ======================================== */
    .mobile-seller-stats {
        display: flex !important;
        flex-wrap: nowrap !important;
        gap: 2px !important;
        overflow-x: auto !important;
        overflow-y: hidden !important;
        padding: 2px !important;
    }
    
    .mobile-stat-card {
        flex: 0 0 auto !important;
        min-width: 60px !important;
        height: 40px !important;
        padding: 2px !important;
        margin: 0 !important;
    }
    
    /* ========================================
       NYUMBASURE COMPACT FEATURES
       ======================================== */
    .mobile-nyumba-features {
        display: flex !important;
        flex-wrap: nowrap !important;
        gap: 2px !important;
        overflow-x: auto !important;
        overflow-y: hidden !important;
        padding: 2px !important;
    }
    
    .mobile-nyumba-feature {
        flex: 0 0 auto !important;
        min-width: 40px !important;
        height: 20px !important;
        padding: 1px !important;
        margin: 0 !important;
    }
    
    /* ========================================
       FOOTER COMPACT LAYOUT
       ======================================== */
    .mobile-footer-content {
        display: flex !important;
        flex-wrap: nowrap !important;
        gap: 4px !important;
        overflow-x: auto !important;
        overflow-y: hidden !important;
        padding: 2px !important;
    }
    
    .mobile-footer-section {
        flex: 0 0 auto !important;
        min-width: 80px !important;
        padding: 2px !important;
        margin: 0 !important;
    }
    
    /* ========================================
       REMOVE ALL UNNECESSARY SPACING
       ======================================== */
    * {
        box-sizing: border-box !important;
    }
    
    h1, h2, h3, h4, h5, h6 {
        margin: 1px 0 !important;
        padding: 0 !important;
    }
    
    p {
        margin: 1px 0 !important;
        padding: 0 !important;
    }
    
    .btn, .button, .mobile-btn {
        margin: 1px !important;
        padding: 2px 4px !important;
    }
    
    .card, .mobile-card {
        margin: 1px !important;
        padding: 2px !important;
    }
    
    /* ========================================
       ENSURE VISIBILITY WITH MINIMUM SIZES
       ======================================== */
    .mobile-icon-btn {
        min-width: 20px !important;
        min-height: 20px !important;
    }
    
    .mobile-cta-button, .mobile-action-btn {
        min-width: 40px !important;
        min-height: 18px !important;
    }
    
    .mobile-category-icon, .mobile-nyumba-icon {
        min-width: 12px !important;
        min-height: 12px !important;
    }
    
    /* ========================================
       TOUCH TARGET OPTIMIZATION
       ======================================== */
    .mobile-touch-target {
        min-height: 20px !important;
        min-width: 20px !important;
    }
    
    /* ========================================
       SCROLLBAR STYLING FOR COMPACT VIEW
       ======================================== */
    ::-webkit-scrollbar {
        width: 2px !important;
        height: 2px !important;
    }
    
    ::-webkit-scrollbar-track {
        background: transparent !important;
    }
    
    ::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.2) !important;
        border-radius: 1px !important;
    }
    
    /* ========================================
       SPECIAL FIRST SCREEN OPTIMIZATION
       ======================================== */
    .mobile-first-screen {
        height: 100vh !important;
        overflow: hidden !important;
        position: relative !important;
    }
    
    .mobile-first-screen-content {
        height: 100vh !important;
        overflow-y: auto !important;
        overflow-x: hidden !important;
        scrollbar-width: none !important;
        -ms-overflow-style: none !important;
    }
    
    .mobile-first-screen-content::-webkit-scrollbar {
        display: none !important;
    }
    
    /* ========================================
       ENSURE ALL PANELS VISIBLE AT FIRST GLANCE
       ======================================== */
    .mobile-panel {
        min-height: 40px !important;
        max-height: 120px !important;
        overflow: hidden !important;
        display: block !important;
        visibility: visible !important;
    }
    
    /* ========================================
       COMPACT ANIMATION CONTAINMENT
       ======================================== */
    .compact-animation-container {
        height: 40px !important;
        overflow: hidden !important;
        position: relative !important;
    }
    
    #ecoloopProductLayer {
        height: 40px !important;
        opacity: 0.1 !important;
    }
    
    /* ========================================
       RESPONSIVE BREAKPOINTS FOR ULTRA COMPACT
       ======================================== */
    @media (max-width: 480px) {
        .mobile-first-screen-layout {
            grid-template-rows: 
                50px    /* Header: 50px */
                70px    /* Welcome: 70px */
                50px    /* Seller Dashboard: 50px */
                70px    /* Categories: 70px */
                80px    /* Products: 80px */
                60px    /* NyumbaSure: 60px */
                50px    /* Footer: 50px */
            !important;
        }
        
        .mobile-category-card {
            min-width: 40px !important;
            height: 35px !important;
        }
        
        .mobile-product-card {
            min-width: 70px !important;
            height: 80px !important;
        }
    }
    
    @media (max-width: 360px) {
        .mobile-first-screen-layout {
            grid-template-rows: 
                45px    /* Header: 45px */
                60px    /* Welcome: 60px */
                45px    /* Seller Dashboard: 45px */
                60px    /* Categories: 60px */
                70px    /* Products: 70px */
                50px    /* NyumbaSure: 50px */
                45px    /* Footer: 45px */
            !important;
        }
        
        .mobile-category-card {
            min-width: 35px !important;
            height: 30px !important;
        }
        
        .mobile-product-card {
            min-width: 60px !important;
            height: 70px !important;
        }
    }
}
